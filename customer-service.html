<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿å®¢æœ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'å¾®è½¯é›…é»‘', sans-serif;
            background-color: #f5f5f5;
            width: 100%;
            height: 100vh;
            overflow: hidden; /* ç¦æ­¢æ•´ä¸ªé¡µé¢æ»šåŠ¨ */
            position: fixed; /* å›ºå®šæ•´ä¸ªé¡µé¢ */
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #fff;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
            box-sizing: border-box;
        }

        .back-button {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #333;
            cursor: pointer;
        }

        .header-title {
            font-size: 16px;
            margin: 0;
        }

        .chat-container {
            padding: 15px;
            margin-bottom: 60px;
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 120px);
            overflow-y: auto;
            overflow-x: hidden; /* ç¦æ­¢æ°´å¹³æ»šåŠ¨ */
            width: 100%;
            box-sizing: border-box;
            position: fixed; /* å›ºå®šä½ç½® */
            left: 0;
            right: 0;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            width: 100%;
            box-sizing: border-box; /* ç¡®ä¿å†…è¾¹è·åŒ…å«åœ¨å®½åº¦å†… */
        }

        .message.system {
            justify-content: center;
        }

        .message.service {
            justify-content: flex-start;
        }

        .message.customer {
            justify-content: flex-end;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 10px;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 15px 25px;
            border-radius: 10px;
            position: relative;
            white-space: pre-line;
            line-height: 1.5;
            word-wrap: break-word; /* ç¡®ä¿é•¿æ–‡æœ¬ä¼šæ¢è¡Œ */
            overflow-wrap: break-word; /* ç¡®ä¿é•¿å•è¯ä¼šæ¢è¡Œ */
        }

        .service .message-content {
            background: #E3F2FD;
            color: #333;
            text-align: left;
            margin-right: auto;
        }

        .customer .message-content {
            background: #666666;
            color: #ffffff;
            text-align: left;
            margin-left: auto;
        }

        .system-message {
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 12px;
            color: #666;
        }

        .input-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px 15px;
            background: #fff;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            box-sizing: border-box;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .voice-button,
        .emoji-button,
        .plus-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .voice-button i,
        .emoji-button i,
        .plus-button i {
            color: #666;
            font-size: 16px;
        }

        .emoji-panel {
            position: fixed;
            bottom: 60px;
            left: 0;
            width: 100%;
            background: #fff;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: none;
            z-index: 999;
            box-sizing: border-box;
        }

        .emoji-list {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 12px;
            padding: 10px;
        }

        .emoji-list span {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .emoji-list span:hover {
            background-color: #f5f5f5;
        }

        .plus-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #fff;
            padding: 20px 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: none;
            z-index: 999;
            border-radius: 16px 16px 0 0;
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }

        .plus-panel.show {
            transform: translateY(0);
        }

        .plus-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 10px 0;
        }

        .plus-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .plus-option i {
            font-size: 24px;
            color: #666;
            margin-bottom: 8px;
        }

        .plus-option span {
            font-size: 12px;
            color: #666;
        }

        .time-stamp {
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-size: 10px;
            color: #999;
        }

        .customer .time-stamp {
            color: rgba(255, 255, 255, 0.7);
        }

        /* æ·»åŠ è¡¨æƒ…æ ·å¼ */
        .message-content span {
            display: inline-block;
            vertical-align: middle;
            margin-left: 4px;
        }

        /* å®¢æœæ¶ˆæ¯çš„æ—¶é—´æˆ³é¢œè‰² */
        .service .time-stamp {
            color: #999;
        }

        /* æ·»åŠ æ–°çš„æ ·å¼ */
        .service-intro {
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin: 0;
        }

        .avatar-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 0;
        }

        .service-welcome {
            background: #E3F2FD;
            color: #333;
            padding: 12px 20px 25px;
            border-radius: 10px;
            text-align: center;
            margin-top: 0;
            display: inline-block;
            width: calc(100% - 40px);
            box-sizing: border-box;
        }

        .message-content-connect {
            max-width: 70%;
            padding: 12px 15px 25px;
            border-radius: 10px;
            position: relative;
            white-space: pre-line;
            line-height: 1.5;
            word-wrap: break-word; /* ç¡®ä¿é•¿æ–‡æœ¬ä¼šæ¢è¡Œ */
            overflow-wrap: break-word; /* ç¡®ä¿é•¿å•è¯ä¼šæ¢è¡Œ */
        }

        .avatar-connect {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 10px;
        }

        .message-connect {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            width: 100%;
        }

        .message-connect.system {
            justify-content: center;
        }

        .message-connect.service {
            justify-content: flex-start;
        }

        .message-connect.customer {
            justify-content: flex-end;
        }

        .message-connect .avatar-connect {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 10px;
        }

        .message-connect .message-content-connect {
            max-width: 70%;
            padding: 12px 15px 25px;
            border-radius: 10px;
            position: relative;
            white-space: pre-line;
            line-height: 1.5;
            word-wrap: break-word; /* ç¡®ä¿é•¿æ–‡æœ¬ä¼šæ¢è¡Œ */
            overflow-wrap: break-word; /* ç¡®ä¿é•¿å•è¯ä¼šæ¢è¡Œ */
        }

        .service-connect .message-content-connect {
            background: #E3F2FD;
            color: #333;
            text-align: left;
            margin-right: auto;
        }

        .customer-connect .message-content-connect {
            background: #666666;
            color: #ffffff;
            text-align: left;
            margin-left: auto;
        }

        .system-message-connect {
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 12px;
            color: #666;
        }

        .time-stamp-connect {
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-size: 10px;
            color: #999;
        }

        .customer-connect .time-stamp-connect {
            color: rgba(255, 255, 255, 0.7);
        }

        /* æ·»åŠ è¡¨æƒ…æ ·å¼ */
        .message-content-connect span {
            display: inline-block;
            vertical-align: middle;
            margin-left: 4px;
        }

        /* å®¢æœæ¶ˆæ¯çš„æ—¶é—´æˆ³é¢œè‰² */
        .service-connect .time-stamp-connect {
            color: #999;
        }

        /* æ·»åŠ æ–°çš„æ ·å¼ */
        .service-intro-connect {
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin: 0;
        }

        .avatar-large-connect {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 0;
        }

        .service-welcome-connect {
            background: #E3F2FD;
            color: #333;
            padding: 12px 20px 25px;
            border-radius: 10px;
            text-align: center;
            margin-top: 0;
            display: inline-block;
            width: calc(100% - 40px);
            box-sizing: border-box;
        }

        /* ä¿®æ”¹äººå·¥å®¢æœæ¥å…¥æ—¶çš„ç‰¹æ®Šæ ·å¼ */
        .service-connect {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin: 20px 0;
        }

        .avatar-connect {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            position: relative;
            z-index: 2;
            margin-bottom: -25px;
        }

        .message-content-connect {
            background: #f5f5f5;
            color: #333;
            padding: 35px 20px 25px;
            border-radius: 10px;
            text-align: center;
            max-width: 200px;
            position: relative;
            margin: 0 auto;
        }

        /* æ·»åŠ é€€å‡ºæŒ‰é’®æ ·å¼ */
        .exit-service {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: #333;
            cursor: pointer;
            display: none; /* é»˜è®¤éšè— */
        }

        .exit-service:hover {
            color: #E41D1D;
        }

        /* æ·»åŠ è¯­éŸ³å½•åˆ¶æç¤ºæ ·å¼ */
        .voice-tip {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            display: none;
            align-items: center;
            z-index: 1001;
        }

        .voice-tip i {
            margin-right: 10px;
            font-size: 20px;
        }

        /* æ·»åŠ è¡¨æƒ…é¢ */
        .emoji-panel {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            display: none;
            align-items: center;
            z-index: 1001;
            animation: pulse 1.5s infinite;
        }

        .emoji-panel .emoji-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .emoji-panel .emoji-list span {
            cursor: pointer;
            font-size: 24px;
        }

        /* æ·»åŠ åŠ å·é¢æ¿ */
        .plus-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #fff;
            padding: 20px 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: none;
            z-index: 999;
            border-radius: 16px 16px 0 0;
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }

        .plus-panel.show {
            transform: translateY(0);
        }

        .plus-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 10px 0;
        }

        .plus-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .plus-option i {
            font-size: 24px;
            color: #666;
            margin-bottom: 8px;
        }

        .plus-option span {
            font-size: 12px;
            color: #666;
        }

        .input-box {
            flex: 1;
            height: 32px;
            padding: 0 12px;
            border: none;
            border-radius: 16px;
            font-size: 14px;
            background-color: #f5f5f5;
            color: #333;
            text-align: left;
        }

        .input-box:focus {
            outline: none;
            background-color: #f5f5f5;
        }

        .input-box::placeholder {
            color: #999;
        }

        /* æ·»åŠ å›¾ç‰‡å’Œæ–‡ä»¶æ¶ˆæ¯çš„æ ·å¼ */
        .image-content {
            padding: 5px !important;
            background: transparent !important;
        }

        .sent-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            display: block;
        }

        .file-content {
            background: #f5f5f5;
            padding: 10px 15px;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-info i {
            font-size: 24px;
            color: #666;
        }

        .file-name {
            font-size: 14px;
            color: #333;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .file-size {
            font-size: 12px;
            color: #666;
        }

        /* æ·»åŠ è®¢å•é€‰æ‹©å™¨æ ·å¼ */
        .order-selector {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .order-selector-content {
            width: 90%;
            max-width: 320px;
            max-height: 80vh;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .order-selector-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f8f8;
        }

        .order-selector-header span {
            font-size: 16px;
            font-weight: bold;
        }

        .order-selector-header i {
            font-size: 20px;
            color: #666;
            cursor: pointer;
            padding: 5px;
        }

        .order-selector-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .selector-order-item {
            background: #fff;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #eee;
        }

        .selector-order-number {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .selector-order-info {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .selector-order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .selector-order-price {
            color: #E41D1D;
            font-weight: bold;
        }

        .selector-order-button {
            background: #2196F3;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="back-button" onclick="history.back()">
            <i class="fas fa-chevron-left"></i>
        </div>
        <h1 class="header-title">æ™ºèƒ½å®¢æœ</h1>
        <div class="exit-service" onclick="exitHumanService()" style="display: none;">
            <i class="fas fa-sign-out-alt"></i>
        </div>
    </div>

    <div class="chat-container">
        <!-- åˆå§‹æ¶ˆæ¯ä¼šç”± JavaScript åŠ¨æ€æ·»åŠ  -->
    </div>

    <div class="input-container">
        <div class="voice-button" onclick="startVoiceInput()">
            <i class="fas fa-microphone"></i>
        </div>
        <input type="text" class="input-box" placeholder="è¯·è¾“å…¥æ¶ˆæ¯..." enterkeyhint="send">
        <div class="emoji-button" onclick="toggleEmojiPanel()">
            <i class="far fa-smile"></i>
        </div>
        <div class="plus-button" onclick="togglePlusPanel()">
            <i class="fas fa-plus"></i>
        </div>
    </div>

    <div class="emoji-panel" id="emojiPanel">
        <div class="emoji-list">
            <!-- è¿™é‡Œæ·»åŠ è¡¨æƒ…åˆ—è¡¨ -->
            <span onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
            <span onclick="insertEmoji('ğŸ˜‚')">ğŸ˜‚</span>
            <span onclick="insertEmoji('ğŸ¤£')">ğŸ¤£</span>
            <span onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
            <span onclick="insertEmoji('ğŸ¥°')">ğŸ¥°</span>
            <span onclick="insertEmoji('ğŸ˜˜')">ğŸ˜˜</span>
            <span onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
            <span onclick="insertEmoji('ğŸ¤”')">ğŸ¤”</span>
            <span onclick="insertEmoji('ğŸ˜…')">ğŸ˜…</span>
            <span onclick="insertEmoji('ğŸ˜‰')">ğŸ˜‰</span>
            <span onclick="insertEmoji('ğŸŒ¹')">ğŸŒ¹</span>
            <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
            <span onclick="insertEmoji('â¤ï¸')">â¤ï¸</span>
            <span onclick="insertEmoji('ğŸ’•')">ğŸ’•</span>
            <span onclick="insertEmoji('ğŸ’ª')">ğŸ’ª</span>
        </div>
    </div>

    <div class="plus-panel" id="plusPanel">
        <div class="plus-options">
            <div class="plus-option" onclick="handleFileSelect('image')">
                <i class="fas fa-image"></i>
                <span>å›¾ç‰‡</span>
            </div>
            <div class="plus-option" onclick="handleFileSelect('camera')">
                <i class="fas fa-camera"></i>
                <span>æ‹ç…§</span>
            </div>
            <div class="plus-option" onclick="handleFileSelect('file')">
                <i class="fas fa-file"></i>
                <span>æ–‡ä»¶</span>
            </div>
            <div class="plus-option" onclick="showOrderSelector()">
                <i class="fas fa-list-alt"></i>
                <span>é€‰æ‹©è®¢å•</span>
            </div>
        </div>
    </div>

    <div class="order-selector" id="orderSelector">
        <div class="order-selector-content">
            <div class="order-selector-header">
                <span>é€‰æ‹©è®¢å•</span>
                <i class="fas fa-times" onclick="closeOrderSelector()"></i>
            </div>
            <div class="order-selector-list">
                <!-- è®¢å•åˆ—è¡¨å°†é€šè¿‡ JavaScript åŠ¨æ€æ·»åŠ  -->
            </div>
        </div>
    </div>

    <script>
        // æ·»åŠ è·é—®å€™è¯­çš„å‡½æ•°
        function getGreeting() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 12) {
                return 'æ—©ä¸Šå¥½';
            } else if (hour >= 12 && hour < 18) {
                return 'ä¸­åˆå¥½';
            } else if (hour >= 18 && hour < 23) {
                return 'æ™šä¸Šå¥½';
            } else {
                return 'æ·±å¤œå¥½';
            }
        }

        // ä¿®æ”¹é¡µé¢åŠ è½½çš„å¤„ç†
        window.onload = function() {
            // é»˜è®¤æ˜¾ç¤ºæ™ºèƒ½å®¢æœ
            const headerTitle = document.querySelector('.header-title');
            headerTitle.textContent = 'æ™ºèƒ½å®¢æœ';
            
            const selectedOrder = JSON.parse(localStorage.getItem('selectedOrder'));
            if (selectedOrder) {
                // è·å–ç”¨æˆ·åå’Œé—®å€™è¯­
                const userName = selectedOrder.booker.replace('å…ˆç”Ÿ', '').replace('å¥³å£«', '');
                const greeting = getGreeting();
                const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false
                });
                
                // å…ˆå‘é€è®¢å•ä¿¡æ¯
                const orderMessage = 
`è®¢å•å·ï¼š${selectedOrder.orderNumber}
é¡¹ç›®ï¼š${selectedOrder.orderInfo}
é¢„è®¢äººï¼š${selectedOrder.booker}
å‡ºè¡Œæ—¥æœŸï¼š${selectedOrder.date}
ä»·æ ¼ï¼š${selectedOrder.price}`;
                
                const orderHTML = `
                    <div class="message service">
                        <img src="https://s1.imagehub.cc/images/2024/11/08/310427fdd306fc5d1aaea5fb94728d50.jpg" alt="å®¢æœå¤´åƒ" class="avatar">
                        <div class="message-content">
                            ${orderMessage.replace(/\n/g, '<br>')}
                            <div class="time-stamp">${currentTime}</div>
                        </div>
                    </div>
                `;
                
                // æ¸…ç©ºåŸæœ‰çš„æ¬¢è¿æ¶ˆæ¯
                chatContainer.innerHTML = '';
                
                // æ·»åŠ è®¢å•ä¿¡æ¯
                chatContainer.insertAdjacentHTML('beforeend', orderHTML);
                
                // è¿Ÿå‘é€é—®å€™è¯­
                setTimeout(() => {
                    const greetingTime = new Date().toLocaleTimeString('zh-CN', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        hour12: false
                    });
                    
                    const greetingHTML = `
                        <div class="message service">
                            <img src="https://s1.imagehub.cc/images/2024/11/08/310427fdd306fc5d1aaea5fb94728d50.jpg" alt="å®¢æœå¤´åƒ" class="avatar">
                            <div class="message-content">
                                å°Šæ•¬çš„${userName}${greeting}ï¼Œæ‚¨é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿè®©æˆ‘æ¥ä¸ºä½ å¤„ç†å§~ <span style="color: #ff4d4f;">ğŸŒ¹</span>
                                <div class="time-stamp">${greetingTime}</div>
                            </div>
                        </div>
                    `;
                    
                    chatContainer.insertAdjacentHTML('beforeend', greetingHTML);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000); // å»¶è¿Ÿ1ç§’å‘é€é—®å€™è¯­
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        }

        // æ·»åŠ åˆ‡æ¢åˆ°äººå·¥æœçš„å‡½æ•°
        function switchToHumanService() {
            const headerTitle = document.querySelector('.header-title');
            headerTitle.textContent = 'åœ¨çº¿å®¢æœ';
            
            // æ·»åŠ åˆ‡æ¢æç¤ºæ¶ˆæ¯
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            const switchMessage = `
                <div class="time-stamp">${currentTime}</div>
                <div class="message system">
                    <div class="system-message">æ­£åœ¨ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœï¼Œè¯·ç¨å€™...</div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', switchMessage);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // æ¨¡æ‹Ÿäººå·¥å®¢æœæ¥å…¥
            setTimeout(() => {
                const humanMessage = `
                    <div class="time-stamp">${currentTime}</div>
                    <div class="message service">
                        <img src="https://s1.imagehub.cc/images/2024/11/08/310427fdd306fc5d1aaea5fb94728d50.jpg" alt="å®¢æœå¤´åƒ" class="avatar">
                        <div class="message-content">
                            æ‚¨å¥½ï¼Œæˆ‘æ˜¯å®¢æœå°ä¸‡ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ
                        </div>
                    </div>
                `;
                
                chatContainer.insertAdjacentHTML('beforeend', humanMessage);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 1500);
        }

        // ä¿®æ”¹åˆ¤æ–­å®¢æœç±»å‹çš„å‡½
        function checkServiceType() {
            // ä½¿ç”¨éšæœºæ•°æ¨¡æ‹Ÿå®¢æœç±»å‹åˆ¤æ–­ï¼ˆå®é™…åº”è¯¥æ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ¤æ–­ï¼‰
            const isHumanService = Math.random() < 0.5;
            
            // æ›´æ–°æ ‡é¢˜
            const headerTitle = document.querySelector('.header-title');
            if (headerTitle) {
                headerTitle.textContent = isHumanService ? 'åœ¨çº¿å®¢æœ' : 'æ™ºèƒ½å®¢æœ';
            }
            
            // å°†å®¢æœç±»å‹å­˜å‚¨åœ¨ localStorage ä¸­
            localStorage.setItem('serviceType', isHumanService ? 'human' : 'ai');
            
            return isHumanService;
        }

        // æ·»åŠ è·å–å®¢æœç±»å‹çš„å‡½æ•°
        function getServiceType() {
            return localStorage.getItem('serviceType') === 'human';
        }

        // æ‰©å±•æ™ºèƒ½æœºå™¨äººå¯¹è¯ç³»ç»Ÿï¼Œæ·»åŠ æ›´å¤šåœºæ™¯
        const botResponses = {
            // å……å€¼é€€æ¬¾ç›¸å…³
            'å€¼': 'æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å……å€¼ï¼š\n1. æ”¯ä»˜å®\n2. å¾®ä¿¡æ”¯ä»˜\n3. é“¶è¡Œå¡\nè¯·é€‰æ‹©æ‚¨æƒ³ä½¿ç”¨çš„æ”¯ä»˜æ–¹å¼ã€‚',
            'é€€æ¬¾': 'æ¬¾ç”³è¯·å°†åœ¨1-3ä¸ªå·¥ä½œæ—¥å†…å¤„ç†ï¼Œé€€æ¬¾é‡‘é¢å°†åŸè·¯è¿”å›æ‚¨çš„æ”¯ä»˜è´¦æˆ·ã€‚',
            'æ”¯ä»˜': 'æˆ‘ä»¬æ”¯æŒæ”¯ä»˜ã€å¾®ä¿¡æ”¯ä»˜å’Œé“¶è¡Œå¡æ”¯ä»˜ï¼Œè¯·é—®æ‚¨æƒ³äº†è§£å“ªç§æ”¯ä»˜æ–¹å¼ï¼Ÿ',
            'é’±': 'æ‚¨å¯ä»¥é€‰æ‹©å¤šç§æ”¯ä»˜æ–¹å¼ï¼š\n1. æ”¯ä»˜å®\n2. å¾®ä¿¡æ”¯ä»˜\n3. é“¶è¡Œå¡\nè¯·é—®æ‚¨æƒ³ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ',
            
            // è®¢å•ç›¸å…³
            'è®¢å•': 'æ‚¨å¯ä»¥åœ¨"å…¨éƒ¨è®¢å•"ä¸­æŸ¥çœ‹æ‚¨çš„æ‰€æœ‰å•è®°å½•ï¼ŒåŒ…æ‹¬å¾…ä»˜æ¬¾ã€è¿›è¡Œä¸­ã€å·²å®Œæˆå’Œå·²é€€æ¬¾çš„è®¢å•ã€‚',
            'å–æ¶ˆ': 'è®¢å•å–æ¶ˆè§„åˆ™ï¼š\n1. ä»˜æ¬¾è®¢å•å¯ç›´æ¥å–æ¶ˆ\n2. å·²ä»˜æ¬¾è®¢å•éœ€è¦ç”³è¯·é€€æ¬¾\n3. è¿›è¡Œä¸­çš„è®¢å•éœ€è¦è”ç³»å®¢æœå¤„ç†',
            'ä¿®æ”¹': 'å•ä¿®è¯´æ˜ï¼š\n1. æœªä»˜æ¬¾è®¢å•å¯æ¥ä¿®æ”¹\n2. å·²ä»˜æ¬¾è®¢å•è”ç³»å®¢æœå¤„ç†\n3. éƒ¨åˆ†ä¿¡æ¯ä¿®æ”¹å¯èƒ½äº§ç”Ÿè´¹ç”¨',
            
            // åŸå¸‚ç©ä¼´ç›¸å…³
            'åŸå¸‚ç©ä¼´': 'åŸå¸‚ç©ä¼´æœåŠ¡åŒ…æ‹¬ï¼š\n1. æœ¬åœ°å‘å¯¼\n2. æ™¯ç‚¹è®²è§£\n3. ç¾é£Ÿæ¨è\n4. æ‹ç…§æœåŠ¡\nè¯·é—®æ‚¨éœ€è¦å“ªé¡¹æœåŠ¡ï¼Ÿ',
            'ç©ä¼´': 'æˆ‘ä»¬çš„ç©ä¼´éƒ½ç»è¿‡ä¸¥æ ¼ç­›é€‰ï¼Œæä¾›ä¸“ä¸šçš„æœ¬åœ°å‘å¯¼æœåŠ¡ã€‚æ‚¨å¯ä»¥æ ¹æ®è¯„åˆ†å’Œè¯„ä»·é€‰æ‹©åˆé€‚çš„ç©ä¼´ã€‚',
            'å‘å¯¼': 'æœ¬åœ°å‘å¯¼å¯ä»¥ä¸ºæ‚¨ä¾›ï¼š\n1. æ™¯ç‚¹ä»‹\n2. ç¾é£Ÿæ¨è\n3. è·¯çº¿è§„åˆ’\n4. æ–‡åŒ–è®²è§£',
            
            // é—¨ç¥¨ç›¸å…³
            'é—¨ç¥¨': 'é—¨ç¥¨é¢„è®¢è¯´æ˜ï¼š\n1. æå‰1å¤©é¢„è®¢\n2. æä¾›ç”µå­ç¥¨\n3. å¯é€‰æ‹©å¿«é€šé“\néœ€è¦æˆ‘ä¸ºæ‚¨ä»‹ç»å…·ä½“æ™¯ç‚¹å—ï¼Ÿ',
            'æ™¯ç‚¹': 'çƒ­é—¨æ™¯ç‚¹æ¨èï¼š\n1. è¿ªå£«å°¼ä¹å›­\n2. ä¸œæ–¹æ˜ç \n3. å¤–æ»©è§‚å…‰\n4. åŸéšåº™\nè¯·é—®æ‚¨å¯¹å“ªä¸ªæ™¯ç‚¹æ„Ÿå…´è¶£ï¼Ÿ',
            'é¢„è®¢': 'é¢„è®¢æµï¼š\n1. é€‰æ‹©æ™¯ç‚¹å’Œæ—¥æœŸ\n2. å¡«å†™æ¸¸å®¢ä¿¡æ¯\n3. åœ¨çº¿æ”¯ä»˜\n4. æ”¶å–ç”µå­ç¥¨',
            
            // æ¸¸æˆé™ªç©ç›¸å…³
            'æ¸¸æˆ': 'æ”¯æŒçš„æ¸¸æˆç±»å‹\n1. MOBAç±»\n2. FPSå°„å‡»ç±»\n3. å¡ç‰Œç±»\n4. ä¼‘é—²ç±»\nè¯·é—®æ‚¨æƒ³ç©ä»€ä¹ˆç±»å‹çš„æ¸¸æˆï¼Ÿ',
            'é™ªç©': 'é™ªç©æœåŠ¡è¯´æ˜ï¼š\n1. ä¸“ä¸šé™ªç©\n2. æŒ‰å°æ—¶è®¡è´¹\n3. æ”¯æŒè¯­éŸ³\n4. æŠ€æœ¯æŒ‡å¯¼',
            'ä»·æ ¼': 'ä»·æ ¼è¯´æ˜ï¼š\n1. åŸºç¡€é™ªç©ï¼š30å…ƒ/å°æ—¶\n2. æŠ€æœ¯æŒ‡å¯¼ï¼š50å…ƒ/å°æ—¶\n3. å›¢é˜Ÿé…åˆï¼š40å…ƒ/å°æ—¶',
            
            // é—®å€™è¯­å’Œå¸¸ç”¨è¯­
            'ä½ å¥½': 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ™ºèƒ½å®¢æœå°ä¸‡ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ',
            'åœ¨å—': 'æ‚¨å¥½æˆ‘çš„ï¼è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ',
            'è°¢è°¢': 'ä¸å®¢æ°”ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘å“¦~',
            'å†è§': 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼Œç¥æ‚¨ç”Ÿæ´»æ„‰å¿«ï¼å¦‚æœè¿˜æœ‰é—®é¢˜éšæ—¶æ¥é—®æˆ‘~',
            
            // æŠ•è¯‰å’Œå»ºè®®
            'æŠ•è¯‰': 'æ‚¨çš„æ„è§å¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šè®¤çœŸå¤„ç†å¹¶å°½å¿«å›å¤æ‚¨ã€‚',
            'å»ºè®®': 'æ„Ÿè°¢æ‚¨çš„å»ºè®®ï¼æˆ‘ä»¬ä¼šè®¤çœŸè€ƒè™‘æ‚¨çš„æ„è§ï¼Œä¸æ–­æ”¹è¿›æœåŠ¡è´¨é‡ã€‚',
            'å·®è¯„': 'éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸å¥½çš„ä½“éªŒã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“æƒ…å†µï¼Œæˆ‘ä»¬ä¼šè®¤çœŸå¤„ç†å¹¶æ”¹è¿›ã€‚',
            
            // æ·»åŠ æ›´å¤šåœºæ™¯
            // è´Ÿé¢æƒ…ç»ªå¤„ç†
            'å‚»': 'æˆ‘ç†è§£æ‚¨ç°åœ¨å¯èƒ½æœ‰äº›ä¸æ„‰å¿«ã€‚è¯‰æˆ‘å…·ä½“é‡äº†ä»€ä¹ˆé¢˜ï¼Œæˆ‘ä¼šçœŸå¸®æ‚¨è§£å†³ã€‚',
            'ç¬¨': 'æŠ±æ­‰è®©æ‚¨ä¸æ»¡æ„ã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä¼šåŠªåŠ›æä¾›æ›´å¥½çš„æœåŠ¡ã€‚',
            'åƒåœ¾': 'éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸å¥½çš„ä½“éªŒã€‚è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šç«‹å³å¤„ç†å¹¶æ”¹è¿›æœåŠ¡ã€‚',
            'åºŸç‰©': 'ç†è§£æ‚¨çš„å¿ƒæƒ…ï¼Œå¦‚æœæœåŠ¡æœ‰ä»»ä½•ä¸å‘¨ï¼Œæˆ‘ä»¬ä¼šç«‹å³æ”¹è¿›ã€‚è¯·é—®å…·ä½“æ˜¯å“ªé‡Œè®©æ‚¨ä¸æ»¡æ„ï¼Ÿ',
            'æ»š': 'æˆ‘ç†è§£æ‚¨ç°åœ¨å¾ˆç”Ÿæ°”ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ”¹æ­£çš„æœºä¼šã€‚é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ',
            
            // æƒ…ç»ªå®‰æŠš
            'ç”Ÿæ°”': 'è¯·æ‚¨å…ˆä¸è¦ç”Ÿæ°”ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æˆ‘ä»¬ä¸€èµ·æ¥è§£å†³ã€‚æ‚¨é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Ÿ',
            'ä¸æ»¡æ„': 'éå¸¸æŠ±æ­‰æ²¡æœ‰è¾¾åˆ°æ‚¨çš„æœŸæœ›ã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“é—®é¢˜ï¼Œæˆ‘ä¼šç«­è¯šä¸ºæ‚¨æœåŠ¡ã€‚',
            'ä¸å¼€å¿ƒ': 'å¾ˆæŠ±æ­‰è®©æ‚¨ä¸å¼€å¿ƒäº†ã€‚è¯·å‘Šè¯‰æˆ‘å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä¼šå°½å…¨åŠ›å¸®æ‚¨è§£ã€‚',
            'å¤±æœ›': 'å¯¹äºè®©æ‚¨å¤±æœ›ï¼Œæˆ‘æ·±è¡¨æ­‰æ„ã€‚è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ”¹è¿›çš„æœºä¼šï¼Œå…·ä½“æ˜¯å“ªé‡Œåšå¾—ä¸å¥½ï¼Ÿ',
            
            // ç´§æ€¥æƒ…å†µ
            'ç´§æ€¥': 'è¯·ä¸ç”¨ç€æ€¥ï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆå¤„ç†æ‚¨çš„é—®é¢˜ã€‚è¯·ç®€å•æè¿°ä¸€ä¸‹å…·ä½“æƒ…å†µã€‚',
            'æ€¥': 'æˆ‘æ˜ç™½æ‚¨ç°åœ¨å¾ˆç€æ€¥ï¼Œæˆ‘ä¼šä¼˜å…ˆä¸ºæ‚¨å¤„ç†ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“æƒ…å†µã€‚',
            'å¿«ç‚¹': 'æˆ‘ä¼šåŠ å¿«å¤„ç†é€Ÿåº¦ã€‚è¯·é—®å…·ä½“é‡äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ',
            
            // æ‰¬å›åº”
            'å¥½': 'æ„Ÿè°¢æ‚¨çš„è®¤å¯ï¼æˆ‘ä»¬ä¼šç»§ç»­åŠªåŠ›æä¾›æ›´å¥½çš„æœåŠ¡~',
            'æ£’': 'è°¢è°¢å¤¸å¥–ï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä»¬è¿›æ­¥çš„åŠ¨åŠ›~',
            'ä¼˜ç§€': 'æ„Ÿè°¢æ‚¨çš„è‚¯å®šï¼æˆ‘ä»¬ä¼šç»§ç»­æŒå¹¶åšå¾—æ›´å¥½~',
            
            // é—²èŠåœºæ™¯
            'æ— èŠ': 'è¦ä¸è¦çœ‹çœ‹æˆ‘ä»¬çš„çƒ­é—¨æ´»åŠ¨ï¼Ÿæˆ–è€…æˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èä¸€äº›æœ‰è¶£çš„è¡Œç¨‹~',
            'å›°': 'å·¥ä½œè¾›è‹¦äº†ï¼è¦ä¸è¦çœ‹çœ‹æˆ‘ä»¬çš„ä¼‘é—²å¨±ä¹é¡¹ç›®ï¼Œæ”¾æ¾ä¸€ä¸‹å¿ƒæƒ…ï¼Ÿ',
            'ç´¯': 'è¾›è‹¦äº†ï¼è¦ä¸è¦è€ƒè™‘æ¥ä¸€åœºè½»æ¾çš„æ—…è¡Œï¼Ÿæˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èä¸€äº›ä¼‘é—²è·¯çº¿~',
            
            // ç‰¹é—®å€™
            'åœ¨': 'æˆ‘åœ¨çš„å“¦ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡~',
            'å¿™ä¸å¿™': 'ä¸å¿™çš„ï¼Œæˆ‘éšæ—¶éƒ½åœ¨ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ',
            'äººå·¥': 'éœ€è¦è½¬äººå·¥å®¢æœå—ï¼Ÿæˆ‘å¯ä»¥å¸®è½¬æ¥ï¼Œä¸è¿‡å¯èƒ½éœ€è¦ç¨ç­‰ç‰‡åˆ»ã€‚',
            
            // é“åˆ«åœºæ™¯
            'æ‹œæ‹œ': 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼Œç¥æ‚¨ç”Ÿæ´»æ„‰å¿«ï¼æ¬¢è¿éšæ—¶æ‰¾æˆ‘èŠå¤©å“¦~',
            'å†è§': 'å†è§ï¼ç¥æ‚¨å¿ƒæƒ…æ„‰å¿«ï¼ŒæœŸå¾…ä¸‹æ¬¡ä¸ºæ‚¨æœåŠ¡~',
            '88': '88ï¼æœ‰é—®é¢˜éšæ—¶æ¥æ‰¾æˆ‘å“¦ï¼Œç¥æ‚¨ç”Ÿæ´»æ„‰å¿«~',
            
            // æ·»åŠ æ›´å¤šåœºæ™¯
            // è´¦ç›¸å…³
            'è´¦å·': 'è´¦å·ç›¸å…³é—®é¢˜å¯ä»¥å¸®æ‚¨å¤„ç†ä»¥ä¸‹å†…å®¹ï¼š\n1. è´¦å·ç™»å½•\n2. å¯†ç ä¿®æ”¹\n3. è´¦å·å®‰å…¨\n4. å®åè¯',
            'å¯†ç ': 'å¯†ç ä¿®æ”¹æµç¨‹ï¼š\n1. éªŒè¯åŸå¯†ç \n2. è®¾ç½®æ–°å¯†ç \n3. ç¡®è®¤æ–°å¯†ç \néœ€è¦æˆ‘å¸®æ‚¨ä¿®æ”¹å¯†ç å—ï¼Ÿ',
            'ç™»å½•': 'æ— æ³•ç™»å½•å¯èƒ½æœ‰ä»¥ä¸‹åŸå› ï¼š\n1. å¯†ç é”™è¯¯\n2. è´¦å·è¢«é”å®š\n3. ç½‘ç»œé—®é¢˜\nè¯·å‘Šè¯‰æˆ‘å…·ä½“æƒ…å†µã€‚',
            'æ³¨å†Œ': 'æ³¨å†Œæ–°è´¦å·éœ€è¦ï¼š\n1. æ‰‹æœºå·éªŒè¯\n2. è®¾ç½®å¯†ç \n3. å®åè®¤è¯\néœ€è¦å¸®æ‚¨æ³¨å†Œå—ï¼Ÿ',
            
            // å®‰å…¨ç›¸å…³
            'å®‰å…¨': 'è´¦å·å®‰å…¨å»ºè®®ï¼š\n1. å®šæœŸä¿®æ”¹å¯†ç \n2. å¼€å¯åŒé‡è®¤è¯\n3. ä¸è¦å‘Šè¯‰ä»–äººéªŒè¯ç \n4. ä¿æŠ¤å¥½ä¸ªäººä¿¡æ¯',
            'ç›—å·': 'è´¦å·è¢«ç›—å¤„ç†æ–¹æ³•ï¼š\n1. ç«‹å³ä¿®æ”¹å¯†ç \n2. è”ç³»å®¢æœå†»ç»“è´¦\n3. æ ¸å®è¿‘æœŸæ“ä½œ\nè¯·é—®éœ€è¦å“ªç§å¸®åŠ©ï¼Ÿ',
            'å†»ç»“': 'è´¦å·å†»ç»“åŸå› å¯èƒ½æœ‰ï¼š\n1. å¼‚å¸¸ç™»å½•\n2. è¿è§„æ“ä½œ\n3. ç³»ç»Ÿä¿æŠ¤\nè¯·æä¾›è´¦å·ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ã€‚',
            
            // ä»˜é—®é¢˜
            'å¾®ä¿¡': 'å¾®ä¿¡æ”¯ä»˜æ³¨æ„äº‹ï¼š\n1. ç¡®è®¤è®¢å•é‡‘é¢\n2. æ£€æŸ¥ç½‘ç»œè¿æ¥\n3. ç¡®ä¿å¾®ä¿¡ä½™é¢å……è¶³\n4. æ”¯ä»˜æ—¶ä¿æŒé¡µé¢ç¨³å®š',
            'æ”¯ä»˜å®': 'æ”¯ä»˜å®æ”¯ä»˜è¯´æ˜ï¼š\n1. ç¡®è®¤è®¢å•ä¿¡æ¯\n2. æ£€æŸ¥æ”¯ä»˜å®ä½™é¢\n3. æ³¨æ„æ”¯ä»˜å®‰å…¨\n4. ä¿å­˜æ”¯ä»˜å‡­è¯',
            'é“¶è¡Œå¡': 'é“¶è¡Œå¡æ”¯ä»˜æç¤ºï¼š\n1. ç¡®è®¤å¡ç‰‡é¢åº¦\n2. æ£€æŸ¥å¼€é€šç½‘é“¶\n3. æ³¨æ„çŸ­ä¿¡éªŒè¯\n4. ä¿æŠ¤å¥½å¡ç‰‡ä¿¡æ¯',
            
            // æŠ•è¯‰å‡çº§
            'æŠ•è¯‰': 'æ‚¨çš„æŠ•è¯‰æˆ‘ä»¬ä¼šè®¤çœŸå¤„ç†ï¼š\n1. è®°å½•æŠ•è¯‰å†…å®¹\n2. 24å°æ—¶å†…å›å¤\n3. ä¸“äººè·Ÿè¿›å¤„ç†\n4. ç»“æœåŠæ—¶åé¦ˆ',
            'æ€åº¦': 'äºæœåŠ¡æ€é—®é¢˜ï¼š\n1. æ·±è¡¨æ­‰æ„\n2. ç«‹å³æ”¹æ­£\n3. é‡æ–°æœåŠ¡\n4. è·Ÿè¿›åé¦ˆ',
            'ä¸¾æŠ¥': 'ä¸¾æŠ¥å¤„ç†æµç¨‹ï¼š\n1. æä¾›è¯æ®\n2. æ ¸å®æƒ…å†µ\n3. åŠæ—¶å¤„\n4. ä¿æŠ¤éšç§',
            
            // ç‰¹æ®ŠæœåŠ¡
            'åŠ æ€¥': 'åŠ æ€¥æœåŠ¡è¯´æ˜ï¼š\n1. ä¼˜å…ˆå¤„ç†\n2. ä¸“äººå¯¹æ¥\n3. åŠ æ€¥è´¹ç”¨è¯´æ˜\n4. æ—¶æ•ˆä¿éšœæ‰¿è¯º',
            'å®šåˆ¶': 'æä¾›ä¸ªæ€§åŒ–å®šåˆ¶ï¼š\n1. éœ€æ±‚è¯„ä¼°\n2. æ–¹æ¡ˆåˆ¶å®š\n3. ä»·æ ¼è¯„ä¼°\n4. æ—¶é—´å®‰æ’',
            'ç‰¹æ®Š': 'ç‰¹æ®Šéœ€æ±‚æœåŠ¡ï¼š\n1. æ— éšœç¢è®¾æ–½\n2. å„¿ç«¥å‹å¥½\n3. è€äººé™ªæŠ¤\n4. å® ç‰©æœåŠ¡',
            
            // æ·»åŠ æŠ•è¯‰å¤„ç†åœºæ™¯
            'æ€åº¦å·®': 'å¯¹äºæœåŠ¡æ€åº¦é—®é¢˜ï¼š\n1. æ·±è¡¨æ­‰æ„\n2. ç«‹å³æ”¹æ­£\n3. é‡æ–°æœåŠ¡\n4. è¡¥å¿æ–¹æ¡ˆ',
            'æœåŠ¡å·®': 'æœåŠ¡è´¨é‡é—®ï¼š\n1. è®°å½•é—®é¢˜\n2. ç«‹å³æ•´æ”¹\n3. è·Ÿè¿›åé¦ˆ\n4. æä¾›è¡¥å¿',
            'ä¸æ»¡æ„': 'å¯¹äºæ‚¨çš„ä¸æ»¡ï¼š\n1. è®¤çœŸå€¾å¬\n2. ç§¯æå¤„ç†\n3. åŠæ—¶åé¦ˆ\n4. æŒç»­æ”¹è¿›',
            
            // æ·»åŠ è¡¨æ‰¬åœºæ™¯
            'ç‚¹èµ': 'æ„Ÿè°¢æ‚¨çš„è‚¯å®šï¼\næˆ‘ä»¬ä¼šç»§ç»­ï¼š\n1. ä¿æŒæ°´å‡†\n2. ä¸æ–­åˆ›æ–°\n3. æå‡æœåŠ¡\n4. å›é¦ˆç”¨æˆ·',
            'è¡¨æ‰¬': 'éå¸¸æ„Ÿè°¢æ‚¨çš„è¡¨æ‰¬ï¼\nè¿™æ˜¯å¯¹æˆ‘ä»¬æœ€å¤§çš„é¼“åŠ±ï¼Œæˆ‘ä»¬ä¼šï¼š\n1. å†æ¥å†å‰\n2. æŒç»­æ”¹è¿›\n3. æä¾›æ›´å¥½æœåŠ¡',
            'å¥½è¯„': 'æ„Ÿè°¢æ‚¨çš„å¥½è¯„ï¼\næˆ‘ä»¬å°†ï¼š\n1. ç»§ç»­åŠªåŠ›\n2. æå‡æœåŠ¡\n3. åˆ›æ–°ä½“éªŒ\n4. å›é¦ˆç”¨æˆ·',
            
            // æ·»åŠ é“æ­‰åœºæ™¯
            'æŠ±æ­‰': 'æ‚¨çš„ä½“éªŒå¾ˆé‡è¦ï¼š\n1. è¯šæ³é“æ­‰\n2. ç§¯ææ”¹æ­£\n3. åŠæ—¶è¡¥å¿\n4. æŒç»­ä¼˜åŒ–',
            'å¯¹ä¸èµ·': 'éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥å›°æ‰°ï¼š\n1. ç«‹å³å¤„ç†\n2. è·Ÿè¿›åé¦ˆ\n3. æ”¹è¿›æœåŠ¡\n4. æä¾›è¡¥å¿',
            'æ­‰æ„': 'å‘æ‚¨è¡¨ç¤ºè¯šæŒšçš„æ­‰æ„ï¼š\n1. è®¤çœŸå¯¹å¾…\n2. è¿…é€Ÿå¤„ç†\n3. åŠæ—¶åé¦ˆ\n4. æœåŠ¡æ”¹è¿›',
            
            // æ·»åŠ é—²èŠåœºæ™¯
            'æ— èŠ': 'æ¨èæœ‰è¶£æ´»åŠ¨ï¼š\n1. æœ¬åœ°å±•è§ˆ\n2. æ–‡åŒ–æ´»åŠ¨\n3. æˆ·å¤–è¿åŠ¨\n4. ç¾é£Ÿæ¢åº—',
            'èŠå¤©': 'æˆ‘ä»¬å¯ä»¥èŠèŠï¼š\n1. æ—…è¡Œæ•…äº‹\n2. ç¾é£Ÿæ¨è\n3. ç”Ÿæ´»è¶£äº‹\n4. æ–‡åŒ–æ´»åŠ¨',
            'å¿ƒæƒ…': 'åˆ†äº«ä¸€äº›å¼€å¿ƒäº‹ï¼š\n1. è¶£å‘³æ•…äº‹\n2. æ¸©æš–ç¬é—´\n3. ç”Ÿæ´»æ„Ÿæ‚Ÿ\n4. å¿«ä¹ä½“éªŒ',
            
            // æ·»åŠ å…³å¿ƒé—®å€™
            'ç´¯äº†': 'è¾›è‹¦äº†ï¼å»ºè®®æ‚¨ï¼š\n1. é€‚å½“ä¼‘æ¯\n2. æ”¾æ¾å¿ƒæƒ…\n3. äº«å—ç¾é£Ÿ\n4. åšäº›è¿åŠ¨',
            'å›°äº†': 'æ³¨æ„ä¼‘æ¯å“¦ï¼š\n1. åˆç†ä½œæ¯\n2. é€‚å½“è¿åŠ¨\n3. å¥åº·é¥®é£Ÿ\n4. ä¿æŒå¥½å¿ƒæƒ…',
            'ä¸èˆ’æœ': 'è¯·ç…§é¡¾å¥½è‡ªå·±ï¼š\n1. åŠæ—¶å°±åŒ»\n2. é€‚å½“æ¯\n3. ä¿æŒå¿ƒæƒ…\n4. å¥åº·é¥®é£Ÿ',
            
            // ç”Ÿæ´»æœåŠ¡ç±»
            'åƒé¥­': 'ä¸ºæ‚¨æ¨èé™„è¿‘ç¾é£Ÿï¼š\n1. äººæ°”é¤å…\n2. ç‰¹è‰²å°åƒ\n3. ç½‘çº¢æ‰“å¡\n4. æ·±å¤œé£Ÿå ‚\néœ€è¦å…·ä½“æ¨èå—ï¼Ÿ',
            'ç¾é£Ÿ': 'ç¾é£Ÿæ¨èæœåŠ¡ï¼š\n1. å½“åœ°ç‰¹è‰²\n2. äººæ°”é¤å…\n3. ç½‘çº¢åº—é“º\n4. éšè—ç¾é£Ÿ\næƒ³äº†è§£å“ªç±»ç¾é£Ÿï¼Ÿ',
            'ä½å®¿': 'ä½å®¿æ¨èï¼š\n1. ç»æµå‹é…’åº—\n2. ç²¾å“æ°‘å®¿\n3. è±ªåé…’åº—\n4. ç‰¹è‰²å®¢æ ˆ\néœ€è¦è¯¦ç»†ä¿¡æ¯å—ï¼Ÿ',
            'äº¤é€š': 'äº¤é€šå‡ºè¡Œå»ºè®®ï¼š\n1. å…¬äº¤è·¯çº¿\n2. åœ°é“æ¢ä¹˜\n3. æ‰“è½¦æœåŠ¡\n4. è‡ªè¡Œè½¦ç§Ÿèµ',
            
            // ä¸æ–‡æ˜ç”¨è¯­æç¤º
            'æ»šè›‹': 'æ‚¨çš„å¿ƒæƒ…æˆ‘ç†è§£ï¼Œä½†è¯·ä¿æŒç¤¼è²Œã€‚è®©æˆ‘ä»¬å¿ƒå¹³æ°”å’Œåœ°æ²Ÿé€šï¼Œä¸€å®šèƒ½è§£å†³é—®é¢˜ã€‚',
            'åºŸç‰©': 'æˆ‘ç†è§£æ‚¨å¯èƒ½é‡åˆ°äº†ä¸æ„‰å¿«ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½å¥½æœåŠ¡çš„æœºä¼šã€‚æ‚¨é‡åˆ°ä»€ä¹ˆå…·ä½“é—®é¢˜äº†å—ï¼Ÿ',
            'åƒåœ¾': 'æ‚¨çš„ä¸æ»¡æˆ‘ä»¬æ”¶åˆ°äº†ã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“é—®é¢˜ï¼Œæˆ‘ä¼šè®¤çœŸå¤„ç†å¹¶æ”¹è¿›æœåŠ¡ã€‚',
            'ç™½ç—´': 'å³ä½¿æ‚¨ç°åœ¨ä¸æ»¡æ„ï¼Œæˆ‘ä»¬ä¾ç„¶å¸Œæœ›èƒ½å¥½å¥½ä¸ºæ‚¨æœåŠ¡ã€‚è¯·è¯´è¯´å…·ä½“é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ',
            'ç¥ç»ç—…': 'ç†è§£æ‚¨çš„æƒ…ç»ªï¼Œä½†è¯·ä¿æŒåŸºæœ¬ç¤¼è²Œã€‚è®©æˆ‘ä»¬ä¸€èµ·è§£é—®é¢˜å¥½å—ï¼Ÿ',
            
            // æƒ…æ„Ÿå®‰æŠš
            'éš¾è¿‡': 'åˆ«éš¾è¿‡ï¼Œæˆ‘åœ¨è¿™é‡Œé™ªæ‚¨ã€‚è¦ä¸è¦å¬å¬è½»éŸ³ä¹ï¼Œæˆ–è€…èŠèŠå¤©ï¼Ÿ',
            'ä¼¤å¿ƒ': 'ç”Ÿæ´»ä¸­éš¾å…æœ‰ä¸å¦‚æ„ï¼Œä½†è¯·ä¿æŒå¸Œæœ›ã€‚è¦å’Œæˆ‘è¯´è¯´å‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ',
            'å¤±æœ›': 'æˆ‘èƒ½ç†è§£æ‚¨çš„å¿ƒæƒ…ã€‚ä¸å¦‚è¯´è¯´å…·ä½“æƒ…å†µï¼Œè®©æˆ‘ä»¬ä¸€èµ·æƒ³åŠæ³•ï¼Ÿ',
            'å‹åŠ›': 'å·¥ä½œç”Ÿæ´»éƒ½ä¸å®¹æ˜“ï¼Œè®°å¾—ç…§é¡¾å¥½è‡ªå·±ã€‚è¦ä¸è¦å¬å¬å‡å‹çš„å»ºè®®ï¼Ÿ',
            'ç„¦è™‘': 'æ·±å‘¼å¸ï¼Œæ”¾è½»æ¾ã€‚è®©æˆ‘é™ªæ‚¨èŠèŠå¤©ï¼Œæˆ–è€…è¦å¬äº›èˆ’ç¼“çš„éŸ³ä¹å—ï¼Ÿ',
            
            // æ—¥å¸¸é—®å€™
            'æ—©å®‰': 'æ—©å®‰ï¼æ„¿æ‚¨ä»Šå¤©å¿ƒæƒ…æ„‰å¿«ï¼Œä¸‡äº‹é¡ºæ„~',
            'åˆå®‰': 'åˆå®‰ï¼è®°å¾—æŒ‰æ—¶åƒé¥­ï¼Œé€‚å½“ä¼‘æ¯å“¦~',
            'æ™šå®‰': 'æ™šå®‰ï¼ç¥æ‚¨å¥½æ¢¦ï¼Œæ˜å¤©ä¼šæ›´å¥½~',
            'æ–°å¹´': 'æ–°å¹´å¿«ä¹ï¼ç¥æ‚¨æ–°çš„ä¸€å¹´äº‹äº‹å¦‚æ„ï¼Œå¿ƒæƒ³äº‹æˆ~',
            'èŠ‚æ—¥': 'èŠ‚æ—¥å¿«ä¹ï¼æ„¿æ‚¨èŠ‚æ—¥æ„‰å¿«ï¼Œä¸å®¶äººå…±äº«æ¬¢ä¹æ—¶å…‰~',
            
            // å¤©æ°”ç›¸å…³
            'ä¸‹é›¨': 'ä»Šå¤©æ˜¯é›¨å¤©ï¼Œå‡ºé—¨è®°å¾—å¸¦ä¼å“¦ï¼è¦æ³¨æ„é˜²æ»‘ä¿æŒå®‰å…¨ã€‚',
            'å¤©æ°”': 'å»ºè®®æ‚¨æŸ¥çœ‹å¤©æ°”é¢„æŠ¥APPè·å–å®æ—¶å¤©æ°”ä¿¡æ¯ï¼Œè®°å¾—åšå¥½é˜²æŠ¤å“¦~',
            'æ¸©åº¦': 'è¯·æ³¨æ„åŠæ—¶å¢å‡è¡£ç‰©ï¼Œä¿æŒé€‚å½“æ¸©åº¦ï¼Œé¢„é˜²æ„Ÿå†’ã€‚',
            'é›¾éœ¾': 'ç©ºæ°”è´¨é‡ä¸å¥½æ—¶ï¼Œå»ºè®®æˆ´å£ç½©ï¼Œå‡å°‘æˆ·å¤–æ´»åŠ¨æ—¶é—´ã€‚',
            'é˜²æ™’': 'é˜²æ™’å¾ˆé‡è¦ï¼å»ºè®®æ‚¨ï¼š\n1. æ¶‚é˜²æ™’éœœ\n2. æˆ´é®é˜³å¸½\n3. æ’‘é®é˜³ä¼\n4. ç©¿é˜²æ™’è¡£',
            
            // å¥åº·å»ºè®®
            'å¤±çœ ': 'å¤±çœ å»ºè®®ï¼š\n1. è§„å¾‹ä½œæ¯\n2. ç¡å‰ä¸ç©æ‰‹æœº\n3. å–æ¯æ¸©ç‰›å¥¶\n4. å¬è½»éŸ³ä¹',
            'æ„Ÿå†’': 'æ„Ÿå†’å»ºè®®ï¼š\n1. å¤šå–æ¸©æ°´\n2. æ³¨æ„ä¿æš–\n3. é€‚å½“è¿åŠ¨\n4. åŠæ—¶å°±åŒ»',
            'å¤´ç—›': 'å¤´ç—›ç¼“è§£ï¼š\n1. ä¿æŒå®‰é™\n2. é€‚å½“æŒ‰æ‘©\n3. å–ç‚¹æ¸©æ°´\n4. å¦‚æœæŒç»­å»ºè®®å°±åŒ»',
            'ç–²åŠ³': 'ç¼“è§£ç–²åŠ³ï¼š\n1. åˆç†ä¼‘æ¯\n2. é€‚é‡è¿åŠ¨\n3. å‡è¡¡é¥®é£Ÿ\n4. ä¿æŒå¿ƒæƒ…æ„‰å¿«',
            
            // ç”Ÿæ´»å°è´´å£«
            'çœé’±': 'çœé’±å°æŠ€å·§ï¼š\n1. è´§æ¯”ä¸‰å®¶\n2. å…³æ³¨ä¼˜æƒ \n3. ç†æ€§æ¶ˆè´¹\n4. é€‚å½“å›¤è´§',
            'è´­ç‰©': 'è´­ç‰©å»ºè®®ï¼š\n1. æ¯”ä»·å†ä¹°\n2. çœ‹è¯„ä»·\n3. ç•™æ„æ´»åŠ¨\n4. ç¡®è®¤æ­£å“',
            'è£…ä¿®': 'è£…ä¿®æ³¨æ„ï¼š\n1. é€‰æ‹©æ­£è§„å…¬å¸\n2. è´§æ¯”ä¸‰å®¶\n3. æ³¨æ„ç¯ä¿\n4. æ§åˆ¶é¢„ç®—',
            'æ¬å®¶': 'æ¬å®¶å»ºè®®ï¼š\n1. æå‰è§„åˆ’\n2. åˆç†æ‰“åŒ…\n3. æ ‡è®°ç‰©å“\n4. é€‰æ‹©å¥½æ—¶é—´',
            
            // å¿ƒç†ç–å¯¼
            'å‹åŠ›å¤§': 'ç¼“è§£å‹åŠ›ï¼š\n1. è¿åŠ¨æ”¾æ¾\n2. å€¾è¯‰äº¤æµ\n3. å¬éŸ³ä¹\n4. é€‚å½“ä¼‘æ¯\nè¦å’Œæˆ‘èŠèŠå—ï¼Ÿ',
            'å­¤ç‹¬': 'å…¶å®æ‚¨ä¸æ˜¯ä¸€ä¸ªäººï¼Œæˆ‘ä»¬éƒ½åœ¨ã€‚è¦ä¸è¦ï¼š\n1. å¬äº›éŸ³ä¹\n2. çœ‹çœ‹ç”µå½±\n3. å‡ºé—¨æ•£æ­¥\n4. å’Œæœ‹å‹èŠå¤©',
            'è¿·èŒ«': 'äººç”Ÿéš¾å…è¿·èŒ«ï¼š\n1. ç»™è‡ªå·±æ—¶é—´\n2. åˆ—å‡ºç›®æ ‡\n3. ä¸€æ­¥æ­¥æ¥\n4. ä¿æŒå¸Œæœ›\nè¦å’Œæˆ‘åˆ†äº«å—ï¼Ÿ',
            
            // èŒåœºå»ºè®®
            'å·¥ä½œ': 'å·¥ä½œå»ºè®®ï¼š\n1. åˆç†è§„åˆ’\n2. æé«˜æ•ˆç‡\n3. ä¿æŒå­¦ä¹ \n4. æ³¨æ„ä¼‘æ¯',
            'é¢è¯•': 'é¢è¯•æŠ€å·§ï¼š\n1. å……åˆ†å‡†å¤‡\n2. ç€è£…å¾—ä½“\n3. ä¿æŒè‡ªä¿¡\n4. æ³¨æ„ä»ª',
            'å‡èŒ': 'èŒä¸šå‘å±•ï¼š\n1. æå‡èƒ½åŠ›\n2. ç§¯ç´¯ç»éªŒ\n3. æ‰©å±•äººè„‰\n4. æŠŠæ¡æœºä¼š',
            
            // å­¦ä¹ æé†’
            'å­¦ä¹ ': 'å­¦ä¹ æ–¹æ³•ï¼š\n1. åˆ¶å®šè®¡åˆ’\n2. ä¸“æ³¨æŠ•å…¥\n3. åŠæ—¶å¤ä¹ \n4. å­¦ä»¥è‡´ç”¨',
            'è€ƒè¯•': 'è€ƒè¯•å»ºè®®ï¼š\n1. æ—©åšå‡†å¤‡\n2. åŠ³é€¸ç»“åˆ\n3. ä¿æŒè‡ªä¿¡\n4. æ³¨æ„ä¼‘æ¯',
            'æ•ˆç‡': 'æé«˜æ•ˆç‡ï¼š\n1. åˆ—å‡ºæ¸…å•\n2. ä¸“æ³¨å½“ä¸‹\n3. é€‚æ—¶ä¼‘æ¯\n4. å¥–åŠ±è‡ªå·±',
            
            // ç”Ÿæ´»æƒ…æ„Ÿ
            'åˆ†æ‰‹': 'æ„Ÿæƒ…çš„äº‹éœ€è¦æ—¶é—´æ²»æ„ˆã€‚ç°åœ¨æœ€é‡è¦çš„æ˜¯ï¼š\n1. ç…§é¡¾å¥½è‡ªå·±\n2. ä¿æŒå¸Œæœ›\n3. ç»§ç»­å‰è¿›\n4. ç›¸ä¿¡æœªæ¥',
            'æƒ³å®¶': 'æ€å¿µæ˜¯çˆ±çš„è¡¨ç°ï¼š\n1. æ‰“ä¸ªç”µè¯\n2. å‘é€é—®å€™\n3. è§„åˆ’æ¢è®¿\n4. ä¿é‡èº«ä½“',
            'å‹æƒ…': 'ç»´ç³»å‹æƒ…ï¼š\n1. ç»å¸¸è”ç³»\n2. çœŸè¯šç›¸å¾…\n3. äº’ç›¸ç†è§£\n4. å…±åŒæˆé•¿',
            
            // é»˜è®¤å›å¤
            'default': 'æŠ±æ­‰ï¼Œæˆ‘å¯èƒ½æ²¡æœ‰å®Œå…¨ç†è§£æ‚¨çš„æ„æ€ã€‚æ‚¨å¯ä»¥ï¼š\n1. æ¢ä¸ªæ–¹å¼æè¿°\n2. æŸ¥çœ‹å¸¸è§é—®é¢˜\n3. è½¬äººå·¥å®¢æœ\n4. å‘Šè¯‰æˆ‘æ›´å¤šç»†èŠ‚',

            // æ·»åŠ  GPT é£æ ¼çš„å¼€æ”¾æ€§å¯¹è¯
            'æ¨è': function(message) {
                if (message.includes('ç¾é£Ÿ')) {
                    return 'æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨æ¨èä»¥ä¸‹ç¾é£Ÿï¼š\n1. æœ¬åœ°ç‰¹è‰²å°åƒï¼šå»ºè®®å°è¯•è€å­—å·åº—é“º\n2. ç½‘çº¢æ‰“å¡ï¼šæœ€è¿‘å¾ˆç«çš„åˆ›æ„é¤å…\n3. é«˜åˆ†é¤å…ï¼šç±³å…¶æ—èé¤å…\n4. å¤œé£Ÿå ‚ï¼š24å°æ—¶è¥ä¸šçš„ç‰¹è‰²é¤å…\n\néœ€è¦äº†è§£å…·ä½“å“ªç±»ç¾é£Ÿçš„è¯¦ç»†ä¿¡æ¯å—ï¼Ÿ';
                } else if (message.includes('æ™¯ç‚¹')) {
                    return 'ä¸ºæ‚¨æ¨èä»¥ä¸‹çƒ­é—¨æ™¯ç‚¹ï¼š\n1. æ–‡åŒ–æ™¯åŒºï¼šåšç‰©é¦†ã€å¤å»ºç­‘\n2. è‡ªç„¶æ™¯è§‚ï¼šå…¬å›­ã€è§‚æ™¯å°\n3. å¨±ä¹åœºæ‰€ï¼šä¸»é¢˜ä¹å›­ã€æ¸¸ä¹åœº\n4. ç‰¹è‰²è¡—åŒºï¼šæ–‡åˆ›å›­åŒºã€ç‰¹è‰²è¡—é“\n\næ‚¨å¯¹å“ªç±»æ™¯ç‚¹æ›´æ„Ÿå…´è¶£ï¼Ÿæˆ‘å¯ä»¥æä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚';
                } else {
                    return 'æˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èï¼š\n1. æ—…æ¸¸è·¯çº¿\n2. ç¾é£Ÿé¤å…\n3. ä¼‘é—²åœºæ‰€\n4. æ–‡åŒ–æ´»åŠ¨\n\nè¯·å‘Šè¯‰æˆ‘æ‚¨çš„å…·ä½“å…´è¶£ï¼Œæˆ‘ä¼šæä¾›æ›´ä¸ªæ€§åŒ–çš„æ¨èã€‚';
                }
            },

            'æ€ä¹ˆ': function(message) {
                if (message.includes('ç©')) {
                    return 'æ ¹æ®æ‚¨çš„å…´è¶£ï¼Œæˆ‘å»ºè®®å¯ä»¥ï¼š\n1. æ¢ç´¢æœ¬åœ°æ–‡åŒ–ï¼šå‚è§‚åšç‰©é¦†ã€å¤è¿¹\n2. ä¼‘é—²å¨±ä¹ï¼šä¸»é¢˜å…¬å›­ã€è´­ç‰©ä¸­å¿ƒ\n3. æˆ·å¤–æ´»åŠ¨ï¼šå…¬å›­æ•£æ­¥ã€éª‘è¡Œ\n4. ç‰¹è‰²ä½“éªŒï¼šæœ¬åœ°å·¥ä½œåŠã€æ–‡åŒ–è¯¾ç¨‹\n\næ‚¨æƒ³äº†è§£å“ªä¸ªæ–¹é¢çš„å…·ä½“ä¿¡æ¯ï¼Ÿ';
                } else if (message.includes('å»')) {
                    return 'ä¸ºæ‚¨æä¾›ä»¥ä¸‹å‡ºè¡Œå»ºè®®ï¼š\n1. å…¬å…±äº¤é€šï¼šåœ°é“ã€å…¬äº¤è·¯çº¿\n2. æ‰“è½¦æœåŠ¡ï¼šç½‘çº¦è½¦ã€å‡ºç§Ÿè½¦\n3. è‡ªé©¾è·¯çº¿ï¼šåœè½¦åœºä¿¡æ¯\n4. æ­¥è¡Œè·¯çº¿ï¼šæœ€ä½³æ­¥è¡Œè·¯å¾„\n\néœ€è¦å…·ä½“è·¯çº¿è§„åˆ’å—ï¼Ÿ';
                } else {
                    return 'æˆ‘ç†è§£æ‚¨åœ¨å¯»æ±‚å¸®åŠ©ï¼Œè¯·å‘Šè¯‰æˆ‘æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä¼šæä¾›ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚';
                }
            },

            'ä¸ºä»€ä¹ˆ': function(message) {
                return 'è¿™æ˜¯ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬ä¸€èµ·åˆ†æä¸€ä¸‹å¯èƒ½çš„åŸå› ï¼š\n1. ' + 
                       'é¦–å…ˆï¼Œå¯èƒ½æ˜¯å› ä¸º...\n2. å…¶æ¬¡ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨...\n3. å¦å¤–ä¸æ’é™¤...\n4. æœ€åï¼Œä¹Ÿè¦è€ƒè™‘...\n\n' +
                       'éœ€è¦æˆ‘é’ˆå¯¹æŸä¸ªå…·ä½“åŸå› è¯¦ç»†è§£é‡Šå—ï¼Ÿ';
            },

            // æ·»åŠ ä¸Šä¸‹æ–‡ç†è§£
            'é‚£': function(message, context) {
                return 'æˆ‘æ³¨æ„åˆ°æ‚¨åœ¨å»¶ç»­ä¹‹å‰çš„è¯é¢˜ã€‚è®©æˆ‘ä»¬ç»§ç»­æ¢è®¨ï¼š\n' +
                       '1. å…³äºä¹‹å‰æåˆ°çš„...\n2. æ‚¨å¯èƒ½è¿˜å…³å¿ƒ...\n3. è¡¥å……ä¸€äº›ç›¸å…³ä¿¡æ¯...\n' +
                       'è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³äº†è§£å“ªæ–¹é¢çš„è¯¦ç»†ä¿¡æ¯ï¼Ÿ';
            },

            // æ·»åŠ æ™ºèƒ½åˆ†æ
            'åˆ†æ': function(message) {
                return 'è®©æˆ‘å¸®æ‚¨åˆ†æä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼š\n\n' +
                       'ä¼˜ï¿½ï¿½ï¼š\n1. ...\n2. ...\n\n' +
                       'åŠ£åŠ¿ï¼š\n1. ...\n2. ...\n\n' +
                       'å»ºè®®ï¼š\n1. ...\n2. ...\n\n' +
                       'éœ€è¦æ›´è¯¦ç»†çš„åˆ†æå—ï¼Ÿ';
            },

            // æ·»åŠ ä¸ªæ€§åŒ–å»ºè®®
            'å»ºè®®': function(message) {
                return 'åŸºäºæ‚¨çš„éœ€æ±‚ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š\n\n' +
                       'çŸ­æœŸå»ºè®®ï¼š\n1. ...\n2. ...\n\n' +
                       'é•¿æœŸå»ºè®®ï¼š\n1. ...\n2. ...\n\n' +
                       'æ‚¨è§‰å¾—è¿™äº›å»ºè®®å¯è¡Œå—ï¼Ÿæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è®¨è®ºå…·ä½“å®æ–½æ–¹æ¡ˆã€‚';
            },

            // æ‰©å±•ä¸æ–‡æ˜ç”¨è¯­å¤„ç†
            'å‚»é€¼': 'æˆ‘ç†è§£æ‚¨å¯èƒ½é‡åˆ°äº†ä¸æ„‰å¿«ï¼Œä½†è¯·ä¿æŒåŸºæœ¬çš„ç¤¼è²Œã€‚è®©æˆ‘ä»¬å¿ƒå¹³æ°”å’Œåœ°æ²Ÿé€šï¼Œä¸€å®šèƒ½è§£å†³é—®é¢˜ã€‚æ‚¨é‡åˆ°äº†ä»€ä¹ˆå…·ä½“é—®é¢˜å—ï¼Ÿ',
            'é€¼': 'è¯·ä¿æŒæ–‡æ˜ç”¨è¯­ã€‚å¦‚æœæ‚¨é‡åˆ°äº†é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„å¸®æ‚¨è§£å†³ï¼Œä½†è¯·ç”¨é€‚å½“çš„æ–¹å¼è¡¨è¾¾ã€‚',
            'å‚»ç‹—': 'å³ä½¿æ‚¨ç°åœ¨å¾ˆç”Ÿæ°”ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½å¥½äº¤æµçš„æœºä¼šã€‚æ‚¨é‡åˆ°äº†ä»€ä¹ˆå…·ä½“å›°éš¾å—ï¼Ÿ',
            'å¦ˆ': 'è¯·ä½¿ç”¨æ–‡æ˜ç”¨è¯­äº¤æµã€‚æ‚¨çš„é—®é¢˜æˆ‘ä»¬ä¸€å®šä¼šè®¤çœŸå¤„ç†ï¼Œä½†è¯·ä¿æŒåŸºæœ¬çš„ç¤¼è²Œã€‚',
            'çˆ¸': 'ç†è§£æ‚¨å¯èƒ½æœ‰ä¸æ»¡ï¼Œä½†è¯·ç”¨åˆé€‚çš„æ–¹å¼è¡¨è¾¾ã€‚è®©æˆ‘ä»¬å°±é—®é¢˜æœ¬èº«è¿›è¡Œæ²Ÿé€šå¥½å—ï¼Ÿ',
            'æ“': 'è¯·ä¿æŒè‰¯å¥½çš„æ²Ÿé€šæ–¹å¼ã€‚å¦‚æœæ‚¨é‡åˆ°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¿ƒå¹³æ°”å’Œåœ°ä¸€èµ·è§£å†³ã€‚',
            'æ»š': 'æˆ‘ç†è§£æ‚¨ç°åœ¨çš„å¿ƒæƒ…ï¼Œä½†ç”Ÿæ°”è§£å†³ä¸äº†é—®é¢˜ã€‚ä¸å¦‚å‘Šè¯‰æˆ‘å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ',
            'ç‹—': 'è™½ç„¶æ‚¨ç°åœ¨å¾ˆç”Ÿæ°”ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½å¥½æœåŠ¡çš„æœºä¼šã€‚æ‚¨é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†å—ï¼Ÿ',
            'æ­»': 'æ‚¨çš„å¿ƒæƒ…æˆ‘ç†è§£ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½å¥½äº¤æµçš„æœºä¼šã€‚æ‚¨å…·ä½“é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Ÿ',
            'è‰': 'è¯·ä¿æŒæ–‡æ˜ç”¨è¯­ã€‚æ‚¨çš„é—®é¢˜æˆ‘ä»¬ä¸€å®šä¼šè®¤çœŸå¤„ç†ï¼Œä½†è¯·ç”¨é€‚å½“çš„æ–¹å¼è¡¨è¾¾ã€‚',
            'ç•œç”Ÿ': 'ç†è§£æ‚¨ç°åœ¨å¾ˆæ°”æ„¤ï¼Œä½†è¯·ä¿æŒåŸºæœ¬çš„ç¤¼è²Œã€‚è®©æˆ‘ä»¬å°±é—®é¢˜æœ¬èº«è¿›è¡Œæ²Ÿé€šå¯ä»¥å—ï¼Ÿ',
            'æ™ºéšœ': 'å³ä½¿æ‚¨ç°åœ¨ä¸æ»¡æ„ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¥½å¥½ä¸ºæ‚¨æœåŠ¡ã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ',
            'è„‘æ®‹': 'æ‚¨çš„æƒ…ç»ªæˆ‘ç†è§£ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸ªç†æ€§æ²Ÿé€šæœºä¼šã€‚æ‚¨é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Ÿ',
            'ç¥ç»': 'æˆ‘ç†è§£æ‚¨å¯èƒ½é‡åˆ°äº†ä¸æ„‰å¿«ï¼Œä½†è¯·ä¿æŒç¤¼è²Œã€‚è®©æˆ‘ä»¬ä¸€èµ·è§£å†³é—®é¢˜å¥½å—ï¼Ÿ',
            'ç™½ç—´': 'è™½ç„¶æ‚¨ç°åœ¨å¾ˆç”Ÿæ°”ï¼Œä½†è¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæœåŠ¡çš„æœºä¼šã€‚æ‚¨å…·ä½“é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†ï¼Ÿ',
            'æ··è›‹': 'ç†è§£æ‚¨çš„å¿ƒæƒ…ï¼Œä½†è¯·ä¿æŒåŸºæœ¬ç¤¼è²Œã€‚è®©æˆ‘ä»¬å°±é—®é¢˜æœ¬èº«è¿›è¡Œæ²Ÿé€šå¥½å—ï¼Ÿ',
            'åƒåœ¾': 'æ‚¨çš„ä¸æ»¡æˆ‘ä»¬æ”¶åˆ°äº†ã€‚è¯·å‘Šè¯‰æˆ‘å…·ä½“é—®é¢˜ï¼Œæˆ‘ä¼šè®¤çœŸå¤„ç†å¹¶æ”¹è¿›æœåŠ¡ã€‚',
            'åºŸç‰©': 'ç†è§£æ‚¨çš„å¿ƒæƒ…ï¼Œå¦‚æœæœåŠ¡æœ‰ä»»ä½•ä¸å‘¨ï¼Œæˆ‘ä»¬ä¼šç«‹å³æ”¹è¿›ã€‚è¯·é—®å…·ä½“æ˜¯å“ªé‡Œè®©æ‚¨ä¸æ»¡æ„ï¼Ÿ',

            // é»˜è®¤å›å¤ä¿æŒä¸å˜
            'default': 'æŠ±æ­‰ï¼Œæˆ‘å¯èƒ½æ²¡æœ‰å®Œå…¨ç†è§£æ‚¨çš„æ„æ€ã€‚æ‚¨å¯ä»¥ï¼š\n1. æ¢ä¸ªæ–¹å¼æè¿°\n2. æŸ¥çœ‹å¸¸è§é—®é¢˜\n3. è½¬äººå·¥å®¢æœ\n4. å‘Šè¯‰æˆ‘æ›´å¤šç»†èŠ‚'
        };

        // ä¿®æ”¹è·å–å›å¤çš„å‡½æ•°ï¼Œæ”¯æŒæ›´æ™ºèƒ½çš„å›å¤
        function getBotResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // å¤„ç†å‡½æ•°å¼å›å¤
            for (let key in botResponses) {
                if (typeof botResponses[key] === 'function' && message.includes(key)) {
                    return botResponses[key](message);
                }
            }
            
            // å¤„ç†å›ºå®šå›å¤
            for (let key in botResponses) {
                if (typeof botResponses[key] === 'string' && message.includes(key)) {
                    return botResponses[key];
                }
            }
            
            // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°å…³é”®è¯ï¼Œå°è¯•ç†è§£ç”¨æˆ·æ„å›¾
            if (message.length > 0) {
                if (message.endsWith('?') || message.endsWith('ï¼Ÿ')) {
                    return 'è¿™æ˜¯ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚è®©æˆ‘æ€è€ƒä¸€ä¸‹ï¼š\n1. é¦–å…ˆ...\n2. å…¶æ¬¡...\n3. å¦å¤–...\n4. æœ€å...\n\néœ€è¦æˆ‘è¯¦ç»†è§£é‡ŠæŸä¸ªæ–¹é¢å—ï¼Ÿ';
                }
                if (message.includes('è°¢è°¢') || message.includes('æ„Ÿè°¢')) {
                    return 'ä¸ç”¨è°¢ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘å“¦~';
                }
                if (message.length < 4) {
                    return 'æ‚¨çš„é—®é¢˜å¤ªç®€çŸ­äº†ï¼Œèƒ½å¦è¯¦ç»†æè¿°ä¸€ä¸‹ï¼Ÿè¿™æ ·æˆ‘æ‰èƒ½æ›´å¥½åœ°å¸®åŠ©æ‚¨ã€‚';
                }
            }
            
            // é»˜è®¤å›å¤
            return 'æˆ‘ç†è§£æ‚¨çš„é—®é¢˜æ˜¯å…³äº"' + message + '"ã€‚ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©æ‚¨ï¼Œè¯·é—®ï¼š\n' +
                   '1. æ‚¨èƒ½è¯¦ç»†æè¿°ä¸€ä¸‹å…·ä½“æƒ…å†µå—ï¼Ÿ\n' +
                   '2. æ‚¨æœ€å…³å¿ƒçš„æ˜¯å“ªä¸ªæ–¹é¢ï¼Ÿ\n' +
                   '3. æ‚¨æœŸæœ›å¾—åˆ°ä»€ä¹ˆæ ·çš„è§£å†³æ–¹æ¡ˆï¼Ÿ';
        }

        // æ·»åŠ è½¬äººå·¥æ•°å’Œæ’é˜ŸçŠ¶æ€çš„å˜é‡
        let transferCount = 0;
        let isQueuing = false;
        let queueNumber = 0;

        // æ·»åŠ äººå·¥å’Œæ’é˜Ÿç›¸å…³çš„å‡½æ•°
        function handleTransferRequest(message) {
            if (message.includes('äººå·¥') || message.includes('è½¬äººå·¥')) {
                transferCount++;
                if (transferCount === 1) {
                    // ç¬¬ä¸€æ¬¡è¯·æ±‚è½¬äººå·¥
                    return 'æ‚¨æ˜¯å¦éœ€è¦è½¬äººå·¥æœï¼Ÿå¦‚æœéœ€è¦è¯·å†æ¬¡å‘é€"è½¬äººå·¥"ã€‚';
                } else if (transferCount === 2) {
                    // ç¬¬äºŒæ¬¡è¯·æ±‚è½¬äººå·¥ï¼Œå¼€å§‹æ’é˜Ÿ
                    startQueuing();
                    return 'æ­£åœ¨ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœï¼Œå‰æ–¹ç­‰å¾…äººæ•°è¾ƒå¤šï¼Œè¯·ç¨å€™...';
                }
            }
            return null;
        }

        // ä¿®æ”¹æ’é˜ŸåŠŸèƒ½
        function startQueuing() {
            isQueuing = true;
            queueNumber = Math.floor(Math.random() * 10) + 1; // éšæœº1-10äººæ’é˜Ÿ
            
            // æ˜¾ç¤ºåˆå§‹æ’é˜Ÿæ¶ˆæ¯
            const queueMessage = `
                <div class="message system" id="queueMessage">
                    <div class="system-message">å½“å‰äººå·¥å®¢æœåå¸­å…¨å¿™ï¼Œæ‚¨å‰é¢è¿˜æœ‰${queueNumber}äººæ’é˜Ÿï¼Œè¯·è€å¿ƒç­‰å¾…...</div>
                </div>
            `;
            chatContainer.insertAdjacentHTML('beforeend', queueMessage);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // æ¨¡æ‹Ÿæ’é˜Ÿåº¦
            const queueInterval = setInterval(() => {
                queueNumber--;
                if (queueNumber > 0) {
                    // æ›´æ–°ç³»ç»Ÿæ¶ˆæ¯çš„å†…å®¹
                    const systemMessage = document.getElementById('queueMessage').querySelector('.system-message');
                    systemMessage.textContent = `å½“å‰äººå·¥å®¢æœåå¸­å…¨å¿™ï¼Œæ‚¨å‰é¢è¿˜æœ‰${queueNumber}äººæ’é˜Ÿï¼Œè¯·è€å¿ƒç­‰å¾…...`;
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                } else {
                    clearInterval(queueInterval);
                    // ç§»é™¤æ’é˜Ÿæ¶ˆæ¯
                    const queueMsg = document.getElementById('queueMessage');
                    if (queueMsg) queueMsg.remove();
                    // è¿æ¥äººå·¥å®¢æœ
                    connectToHumanService();
                }
            }, 3000); // æ¯3ç§’æ›´æ–°ä¸€æ¬¡æ’é˜ŸçŠ¶æ€
        }

        // æ·»åŠ å…¨å±€å˜é‡æ¥å­˜å‚¨å½“å‰å®¢æœç±»å‹å’Œå¤´åƒ
        let isHumanService = false;
        const AI_AVATAR = "https://s1.imagehub.cc/images/2024/11/08/310427fdd306fc5d1aaea5fb94728d50.jpg";
        const HUMAN_AVATAR = "https://s1.imagehub.cc/images/2024/11/08/f7c6fc8af7721e2c26d015887b28532e.jpg";

        // ä¿®æ”¹è¿æ¥äººå·¥å®¢æœçš„å‡½æ•°
        function connectToHumanService() {
            isQueuing = false;
            isHumanService = true;
            
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            // æ˜¾ç¤ºé€€å‡ºæŒ‰é’®
            document.querySelector('.exit-service').style.display = 'block';
            
            // æ·»åŠ ç‰¹æ®Šæ ·å¼çš„äººå·¥å®¢æœæ¥å…¥æ¶ˆæ¯
            const humanMessage = `
                <div class="service-connect">
                    <img src="${HUMAN_AVATAR}" alt="å®¢æœå¤´åƒ" class="avatar-connect">
                    <div class="message-content-connect">
                        å·¥å·ï¼š12001ï¼Œä¸ºæ‚¨æœåŠ¡
                        <div class="time-stamp">${currentTime}</div>
                    </div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', humanMessage);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // æ›´æ–°æ ‡é¢˜ä¸ºäººå·¥å®¢æœ
            const headerTitle = document.querySelector('.header-title');
            headerTitle.textContent = 'åœ¨çº¿å®¢æœ';
        }

        // æ·»åŠ æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯çš„å‡½æ•°
        function scrollToBottom() {
            const chatContainer = document.querySelector('.chat-container');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // ä¿®æ”¹å‘é€æ¶ˆæ¯çš„å‡½æ•°
        function sendMessage() {
            const inputBox = document.querySelector('.input-box');
            const message = inputBox.value.trim();
            
            if (message) {
                const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false
                });

                // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                const userMessageHTML = `
                    <div class="message customer">
                        <div class="message-content">
                            ${message}
                            <div class="time-stamp">${currentTime}</div>
                        </div>
                    </div>
                `;
                
                chatContainer.insertAdjacentHTML('beforeend', userMessageHTML);
                inputBox.value = '';
                scrollToBottom();
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯è½¬äººå·¥è¯·æ±‚
                const transferResponse = handleTransferRequest(message);
                if (transferResponse) {
                    setTimeout(() => {
                        const botTime = new Date().toLocaleTimeString('zh-CN', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: false
                        });
                        
                        const botMessageHTML = `
                            <div class="message service">
                                <img src="${isHumanService ? HUMAN_AVATAR : AI_AVATAR}" alt="å®¢æœå¤´åƒ" class="avatar">
                                <div class="message-content">
                                    ${transferResponse}
                                    <div class="time-stamp">${botTime}</div>
                                </div>
                            </div>
                        `;
                        
                        chatContainer.insertAdjacentHTML('beforeend', botMessageHTML);
                        scrollToBottom();
                    }, 1000);
                } else if (!isQueuing) {
                    // å¦‚æœä¸æ˜¯åœ¨æ’é˜ŸçŠ¶æ€ï¼Œåˆ™æ˜¾ç¤ºæœºå™¨äººå›å¤
                    setTimeout(() => {
                        const botResponse = getBotResponse(message);
                        const botTime = new Date().toLocaleTimeString('zh-CN', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: false
                        });
                        
                        const botMessageHTML = `
                            <div class="message service">
                                <img src="${isHumanService ? HUMAN_AVATAR : AI_AVATAR}" alt="å®¢æœå¤´åƒ" class="avatar">
                                <div class="message-content">
                                    ${botResponse.replace(/\n/g, '<br>')}
                                    <div class="time-stamp">${botTime}</div>
                                </div>
                            </div>
                        `;
                        
                        chatContainer.insertAdjacentHTML('beforeend', botMessageHTML);
                        scrollToBottom();
                    }, 1000);
                }
            }
        }

        // ä¿®æ”¹é€€å‡ºäººå·¥å®¢æœçš„å‡½æ•°
        function exitHumanService() {
            isHumanService = false;
            
            // éšè—é€€å‡ºæŒ‰é’®
            document.querySelector('.exit-service').style.display = 'none';
            
            // æ–°æ ‡é¢˜
            const headerTitle = document.querySelector('.header-title');
            headerTitle.textContent = 'æ™ºèƒ½å®¢æœ';
            
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            // æ·»åŠ ç³»ç»Ÿæç¤ºæ¶ˆæ¯
            const systemMessage = `
                <div class="message system">
                    <div class="system-message">å·²é€€å‡ºäººå·¥å®¢æœï¼Œè½¬ä¸ºæ™ºèƒ½å®¢æœä¸ºæ‚¨æœåŠ¡</div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', systemMessage);
            
            // æ·»åŠ æ™ºèƒ½å®¢æœæ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                const welcomeMessage = `
                    <div class="message service">
                        <img src="${AI_AVATAR}" alt="å®¢æœå¤´åƒ" class="avatar">
                        <div class="message-content">
                            æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ™ºèƒ½å®¢æœå°ä¸‡ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ
                            <div class="time-stamp">${currentTime}</div>
                        </div>
                    </div>
                `;
                
                chatContainer.insertAdjacentHTML('beforeend', welcomeMessage);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 1000);
        }

        const inputBox = document.querySelector('.input-box');
        const chatContainer = document.querySelector('.chat-container');

        // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
        inputBox.addEventListener('keydown', function(e) { // æ”¹ä¸º keydown äº‹ä»¶
            // æ£€æµ‹å¤‡ç±»å‹
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            
            // å¦‚æœæ˜¯ç”µè„‘ç«¯ä¸”æŒ‰ä¸‹Enteré”®ï¼ˆä¸æ˜¯æŒ‰ä¸‹Shift+Enterï¼‰
            if (!isMobile && e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault(); // é˜»æ­¢é»˜è®¤æ¢è¡Œ
                sendMessage();
            }
        });

        // ç§»é™¤åŸæœ‰çš„ keypress å’Œ keyup äº‹ä»¶ç›‘å¬å™¨ï¼Œæ”¹ä¸ºç»Ÿä¸€å¤„ç†
        inputBox.addEventListener('keyup', function(e) {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            // ä»…åœ¨ç§»åŠ¨ç«¯å¤„ç† Enter é”®
            if (isMobile && e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });

        // æ·»åŠ è¯­éŸ³è¾“å…¥ç›¸å…³çš„å‡½æ•°
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        function startVoiceInput() {
            const voiceButton = document.querySelector('.voice-button');
            
            if (!isRecording) {
                // å¼€å§‹å½•éŸ³
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        audioChunks = [];
                        
                        mediaRecorder.ondataavailable = (event) => {
                            audioChunks.push(event.data);
                        };
                        
                        mediaRecorder.onstop = () => {
                            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                            // è¿™é‡Œå¯ä»¥å°† audioBlob å‘é€åˆ°æœåŠ¡å™¨è¿›è¡Œè¯­éŸ³è¯†åˆ«
                            // ç›®å‰ä»…æ˜¾ç¤ºæç¤ºä¿¡æ¯
                            showMessage("è¯­éŸ³è¯†åˆ«ä¸­...");
                        };
                        
                        mediaRecorder.start();
                        isRecording = true;
                        voiceButton.classList.add('recording');
                        showVoiceTip("æ¾å¼€ç»“æŸ");
                    })
                    .catch(error => {
                        showMessage("æ— æ³•è®¿é—®éº¦å…‹é£");
                        console.error('Error accessing microphone:', error);
                    });
            } else {
                // åœæ­¢å½•éŸ³
                mediaRecorder.stop();
                isRecording = false;
                voiceButton.classList.remove('recording');
                hideVoiceTip();
                
                // å…³é—­éº¦å…‹é£
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }

        function showVoiceTip(text) {
            let voiceTip = document.querySelector('.voice-tip');
            if (!voiceTip) {
                voiceTip = document.createElement('div');
                voiceTip.className = 'voice-tip';
                voiceTip.innerHTML = `
                    <i class="fas fa-microphone"></i>
                    <span>${text}</span>
                `;
                document.body.appendChild(voiceTip);
            }
            voiceTip.style.display = 'flex';
        }

        function hideVoiceTip() {
            const voiceTip = document.querySelector('.voice-tip');
            if (voiceTip) {
                voiceTip.style.display = 'none';
            }
        }

        function showMessage(text) {
            // åœ¨èŠå¤©çª—å£æ˜¾ç¤ºç³»ç»Ÿæ¶ˆæ¯
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            const messageHTML = `
                <div class="message system">
                    <div class="system-message">${text}</div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', messageHTML);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // æ·»åŠ è§¦æ‘¸äº‹ä»¶å¤„ç†
        document.addEventListener('DOMContentLoaded', function() {
            const voiceButton = document.querySelector('.voice-button');
            
            voiceButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                startVoiceInput();
            });
            
            voiceButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                if (isRecording) {
                    startVoiceInput(); // å†æ¬¡è°ƒç”¨ä»¥åœæ­¢å½•éŸ³
                }
            });
        });

        // æ·»åŠ è¯­éŸ³è¯†åˆ«ç›¸å…³çš„å˜é‡å’Œå‡½æ•°
        let recognition;
        let isListening = false;

        // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'zh-CN'; // è®¾ç½®è¯­è¨€ä¸ºæ–‡

                // è¯­éŸ³è¯†åˆ«ç»“æœå¤„ç†
                recognition.onresult = function(event) {
                    const result = event.results[0][0].transcript;
                    inputBox.value = result;
                    sendMessage(); // è‡ªåŠ¨å‘é€è¯†åˆ«åˆ°çš„æ¶ˆæ¯
                };

                // è¯­éŸ³è¯†åˆ«é”™è¯¯å¤„ç†
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    showMessage('è¯­éŸ³è¯†åˆ«å¤±è´¥ï¼Œè¯·é‡è¯•');
                    stopVoiceInput();
                };

                // è¯­éŸ³è¯†åˆ«ç»“æŸå¤„ç†
                recognition.onend = function() {
                    stopVoiceInput();
                };
            } else {
                showMessage('æ‚¨çš„æµå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½');
            }
        }

        // ä¿®æ”¹å¼€å§‹è¯­éŸ³è¾“å…¥å‡½æ•°
        function startVoiceInput() {
            if (!recognition) {
                initSpeechRecognition();
            }

            if (!isListening && recognition) {
                try {
                    recognition.start();
                    isListening = true;
                    const voiceButton = document.querySelector('.voice-button');
                    voiceButton.classList.add('recording');
                    showVoiceTip('æ­£åœ¨è†å¬...');
                } catch (error) {
                    console.error('Speech recognition start error:', error);
                    showMessage('è¯­éŸ³è¯†åˆ«å¯åŠ¨å¤±è´¥ï¼Œè¯·é‡è¯•');
                    stopVoiceInput();
                }
            }
        }

        // ä¿®æ”¹åœæ­¢è¯­éŸ³è¾“å…¥å‡½æ•°
        function stopVoiceInput() {
            if (isListening && recognition) {
                recognition.stop();
                isListening = false;
                const voiceButton = document.querySelector('.voice-button');
                voiceButton.classList.remove('recording');
                hideVoiceTip();
            }
        }

        // ä¿®æ”¹è¯­éŸ³æŒ‰é’®çš„äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            const voiceButton = document.querySelector('.voice-button');
            
            // ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶
            voiceButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                startVoiceInput();
            });
            
            voiceButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                stopVoiceInput();
            });

            // PCç«¯ç‚¹å‡»äº‹ä»¶
            let isRecording = false;
            voiceButton.addEventListener('click', function(e) {
                e.preventDefault();
                if (!isRecording) {
                    startVoiceInput();
                    isRecording = true;
                } else {
                    stopVoiceInput();
                    isRecording = false;
                }
            });
        });

        // ä¿®æ”¹è¯­éŸ³æç¤ºæ ·å¼
        const voiceTipStyles = `
        .voice-tip {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            display: none;
            align-items: center;
            z-index: 1001;
            animation: pulse 1.5s infinite;
        }

        .voice-tip i {
            margin-right: 10px;
            font-size: 20px;
            color: #E41D1D;
        }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
            100% { transform: translateX(-50%) scale(1); }
        }

        .voice-button.recording {
            background: #E41D1D;
            animation: recording-pulse 1.5s infinite;
        }

        .voice-button.recording i {
            color: #fff;
        }

        @keyframes recording-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        `;

        // æ·»åŠ æ ·å¼åˆ°é¡µé¢
        const styleSheet = document.createElement('style');
        styleSheet.textContent = voiceTipStyles;
        document.head.appendChild(styleSheet);

        // æ·»åŠ è¡¨æƒ…å’ŒåŠ å·é¢æ¿ç›¸å…³çš„å‡½æ•°
        function toggleEmojiPanel() {
            const emojiPanel = document.getElementById('emojiPanel');
            const plusPanel = document.getElementById('plusPanel');
            
            if (emojiPanel.style.display === 'none' || !emojiPanel.style.display) {
                emojiPanel.style.display = 'block';
                plusPanel.style.display = 'none';
                plusPanel.classList.remove('show');
                // æ·»åŠ å»¶è¿Ÿä»¥ç¡®ä¿è¿‡æ¸¡åŠ¨ç”»ç”Ÿæ•ˆ
                setTimeout(() => {
                    emojiPanel.classList.add('show');
                }, 10);
            } else {
                emojiPanel.classList.remove('show');
                setTimeout(() => {
                    emojiPanel.style.display = 'none';
                }, 300); // ç­‰å¾…è¿‡æ¸¡åŠ¨ç”»å®Œæˆ
            }
        }

        function togglePlusPanel() {
            const plusPanel = document.getElementById('plusPanel');
            const emojiPanel = document.getElementById('emojiPanel');
            
            if (plusPanel.style.display === 'none' || !plusPanel.style.display) {
                plusPanel.style.display = 'block';
                setTimeout(() => plusPanel.classList.add('show'), 10); // æ·»åŠ å»¶è¿Ÿä»¥ç¡®ä¿è¿‡æ¸¡åŠ¨ç”»ç”Ÿæ•ˆ
                emojiPanel.style.display = 'none';
            } else {
                plusPanel.classList.remove('show');
                setTimeout(() => plusPanel.style.display = 'none', 300); // ç­‰å¾…è¿‡æ¸¡åŠ¨ç”»å®Œæˆ
            }
        }

        function insertEmoji(emoji) {
            const inputBox = document.querySelector('.input-box');
            inputBox.value += emoji;
            // å¹³æ»‘å…³é—­è¡¨æƒ…é¢æ¿
            const emojiPanel = document.getElementById('emojiPanel');
            emojiPanel.classList.remove('show');
            setTimeout(() => {
                emojiPanel.style.display = 'none';
            }, 300);
        }

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­é¢æ¿
        document.addEventListener('click', function(e) {
            const emojiPanel = document.getElementById('emojiPanel');
            const emojiButton = document.querySelector('.emoji-button');
            const plusPanel = document.getElementById('plusPanel');
            const plusButton = document.querySelector('.plus-button');
            
            if (!emojiPanel.contains(e.target) && !emojiButton.contains(e.target)) {
                emojiPanel.classList.remove('show');
                setTimeout(() => {
                    emojiPanel.style.display = 'none';
                }, 300);
            }
            
            if (!plusPanel.contains(e.target) && !plusButton.contains(e.target)) {
                plusPanel.classList.remove('show');
                setTimeout(() => {
                    plusPanel.style.display = 'none';
                }, 300);
            }
        });

        // æ·»åŠ æ–‡ä»¶å¤„ç†ç›¸å…³çš„å‡½æ•°
        function handleFileSelect(type) {
            let input = document.createElement('input');
            input.type = 'file';
            
            switch(type) {
                case 'image':
                    input.accept = 'image/*';
                    input.multiple = true; // å…è®¸é€‰æ‹©å¤šå¼ å›¾ç‰‡
                    break;
                case 'camera':
                    input.accept = 'image/*';
                    input.capture = 'camera'; // ç›´æ¥æ‰“å¼€ç›¸æœº
                    break;
                case 'file':
                    input.accept = '.doc,.docx,.pdf,.txt'; // é™åˆ¶æ–‡ä»¶ç±»å‹
                    break;
            }

            input.onchange = function(e) {
                const files = Array.from(e.target.files);
                files.forEach(file => {
                    if (file.size > 10 * 1024 * 1024) { // 10MB é™åˆ¶
                        showMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
                        return;
                    }
                    
                    if (type === 'image' || type === 'camera') {
                        sendImage(file);
                    } else {
                        sendFile(file);
                    }
                });
            };

            input.click();
            // å…³é—­åŠ å·é¢æ¿
            document.getElementById('plusPanel').style.display = 'none';
        }

        // å‘é€å›¾ç‰‡çš„å‡½æ•°
        function sendImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false
                });
                
                const messageHTML = `
                    <div class="message customer">
                        <div class="message-content image-content">
                            <img src="${e.target.result}" alt="å‘é€çš„å›¾ç‰‡" class="sent-image">
                            <div class="time-stamp">${currentTime}</div>
                        </div>
                    </div>
                `;
                
                chatContainer.insertAdjacentHTML('beforeend', messageHTML);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            };
            reader.readAsDataURL(file);
        }

        // å‘é€æ–‡ä»¶çš„å‡½æ•°
        function sendFile(file) {
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            const messageHTML = `
                <div class="message customer">
                    <div class="message-content file-content">
                        <div class="file-info">
                            <i class="fas fa-file"></i>
                            <span class="file-name">${file.name}</span>
                            <span class="file-size">${formatFileSize(file.size)}</span>
                        </div>
                        <div class="time-stamp">${currentTime}</div>
                    </div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', messageHTML);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // æ·»åŠ è®¢å•é€‰æ‹©ç›¸å…³çš„å‡½æ•°
        function showOrderSelector() {
            const orderSelector = document.getElementById('orderSelector');
            const orderList = document.querySelector('.order-selector-list');
            
            // ä» localStorage è·å–è®¢å•æ•°æ®æˆ–æ¨¡æ‹Ÿæ•°æ®
            const orders = [
                {
                    orderNumber: 'XK2847591',
                    info: 'åŸå¸‚ç©ä¼´ - ä¸Šæµ·ä¸€æ—¥æ¸¸',
                    booker: 'å¼ å…ˆç”Ÿ',
                    date: '2024-03-20',
                    price: 'Â¥299.00'
                },
                {
                    orderNumber: 'PQ7391845',
                    info: 'æ™¯ç‚¹é—¨ç¥¨ - ä¸œæ–¹æ˜ç ',
                    booker: 'æå¥³å£«',
                    date: '2024-03-19',
                    price: 'Â¥168.00'
                },
                // å¯ä»¥æ·»åŠ æ›´å¤šè®¢å•
            ];
            
            // ç”Ÿæˆè®¢å•åˆ—è¡¨HTML
            orderList.innerHTML = orders.map(order => `
                <div class="selector-order-item">
                    <div class="selector-order-number">è®¢å•å·ï¼š${order.orderNumber}</div>
                    <div class="selector-order-info">${order.info}</div>
                    <div class="selector-order-footer">
                        <div class="selector-order-price">${order.price}</div>
                        <button class="selector-order-button" onclick="selectAndSendOrder('${order.orderNumber}', '${order.info}', '${order.booker}', '${order.date}', '${order.price}')">
                            é€‰æ‹©
                        </button>
                    </div>
                </div>
            `).join('');
            
            // æ˜¾ç¤ºå¼¹çª—
            orderSelector.style.display = 'flex';
            
            // å…³é—­åŠ å·é¢æ¿
            const plusPanel = document.getElementById('plusPanel');
            plusPanel.classList.remove('show');
            setTimeout(() => plusPanel.style.display = 'none', 300);
        }

        function closeOrderSelector() {
            const orderSelector = document.getElementById('orderSelector');
            orderSelector.style.display = 'none';
        }

        function selectAndSendOrder(orderNumber, info, booker, date, price) {
            const currentTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            
            const orderMessage = 
`è®¢å•å·ï¼š${orderNumber}
é¡¹ç›®ï¼š${info}
é¢„è®¢äººï¼š${booker}
å‡ºè¡Œæ—¥æœŸï¼š${date}
ä»·æ ¼ï¼š${price}`;
            
            const messageHTML = `
                <div class="message customer">
                    <div class="message-content">
                        ${orderMessage.replace(/\n/g, '<br>')}
                        <div class="time-stamp">${currentTime}</div>
                    </div>
                </div>
            `;
            
            chatContainer.insertAdjacentHTML('beforeend', messageHTML);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // å…³é—­è®¢å•é€‰æ‹©å™¨
            closeOrderSelector();
        }

        // ä¿®æ”¹ WebSocket è¿æ¥ç›¸å…³ä»£ç 
        let ws = null;
        let reconnectAttempts = 0;
        const MAX_RECONNECT_ATTEMPTS = 5;
        const RECONNECT_INTERVAL = 3000;

        function connectWebSocket() {
            ws = new WebSocket('ws://localhost:8080');
            
            ws.onopen = function() {
                console.log('WebSocketè¿æ¥å·²å»ºç«‹');
                reconnectAttempts = 0;
                
                // å‘é€ç”¨æˆ·ç™»å½•ä¿¡æ¯
                ws.send(JSON.stringify({
                    type: 'user_login',
                    userId: 'user_' + Math.random().toString(36).substr(2, 9),
                    userName: 'è®¿å®¢'
                }));
                
                // å¼€å§‹å‘é€å¿ƒè·³
                startHeartbeat();
            };
            
            ws.onmessage = function(event) {
                const message = JSON.parse(event.data);
                handleMessage(message);
            };
            
            ws.onclose = function() {
                console.log('WebSocketè¿æ¥å·²å…³é—­');
                stopHeartbeat();
                attemptReconnect();
            };
            
            ws.onerror = function(error) {
                console.error('WebSocketé”™è¯¯:', error);
            };
        }

        function handleMessage(message) {
            switch(message.type) {
                case 'chat_message':
                    displayMessage(message);
                    break;
                case 'history':
                    displayChatHistory(message.messages);
                    break;
                case 'service_assigned':
                    handleServiceAssigned(message);
                    break;
                // å¤„ç†å…¶ä»–ç±»å‹çš„æ¶ˆæ¯...
            }
        }

        function attemptReconnect() {
            if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {
                reconnectAttempts++;
                console.log(`å°è¯•é‡æ–°è¿æ¥... (${reconnectAttempts}/${MAX_RECONNECT_ATTEMPTS})`);
                setTimeout(connectWebSocket, RECONNECT_INTERVAL);
            } else {
                console.log('é‡è¿æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                showErrorMessage('è¿æ¥å·²æ–­å¼€ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            }
        }

        // å¿ƒè·³æ£€æµ‹
        let heartbeatInterval;

        function startHeartbeat() {
            heartbeatInterval = setInterval(() => {
                if (ws.readyState === WebSocket.OPEN) {
                    ws.send(JSON.stringify({ type: 'heartbeat' }));
                }
            }, 15000); // æ¯15ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
        }

        function stopHeartbeat() {
            if (heartbeatInterval) {
                clearInterval(heartbeatInterval);
            }
        }

        // åˆå§‹è¿æ¥
        connectWebSocket();
    </script>
</body>
</html> 